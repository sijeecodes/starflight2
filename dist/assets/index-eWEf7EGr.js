import{B as ut,a as de,P as gt,T as he,b as Ot,c as Ee,d as Tt,L as zt,e as ie,F as ft,M as O,V as ve,C as k,f as z,S as ne,g as Ut,h as Gt,D as Qe,i as ae,j as x,I as Kt,Q as pt,k as Vt,O as ht,l as Xt,m as Wt,n as vt,N as qt,o as kt,p as Yt,q as Ce,r as Pt,R as _e,s as Zt,t as Jt,u as Ie,v as $t,w as Rt,x as At,y as K,z as jt,A as ei,E as oe,G as ti,H as ii,J as ni,K as It,U as $,W as bt,X as yt,Y as ai,Z as ri,_ as oi,$ as si,a0 as ci,a1 as Mt,a2 as W,a3 as Xe,a4 as We,a5 as qe,a6 as ke,a7 as Ye,a8 as li,a9 as mi,aa as Pe,ab as Ge,ac as di,ad as ue,ae as St,af as ge,ag as ui,ah as Ze,ai as De,aj as gi,ak as se,al as Ti,am as Bt,an as xt,ao as Ke,ap as fi,aq as pi,ar as hi,as as vi,at as Pi,au as Ri,av as Ai}from"./three-DkheK7ek.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(n){if(n.ep)return;n.ep=!0;const r=t(n);fetch(n.href,r)}})();const Ii=function(){const e=new ut,t=new Float32Array(600);for(let a=0;a<200;a++)t[a*3]=Math.random()*280-140,t[a*3+1]=Math.random()*200-100,t[a*3+2]=Math.random()*1700-700;return e.setAttribute("position",new de(t,3)),e},bi=function(){return new gt({color:16777215,size:3.3,transparent:!0,map:new he().load("artSrc/star.png")})};function Je(i,e){if(e===Ot)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(e===Ee||e===Tt){let t=i.getIndex();if(t===null){const o=[],s=i.getAttribute("position");if(s!==void 0){for(let c=0;c<s.count;c++)o.push(c);i.setIndex(o),t=i.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const a=t.count-2,n=[];if(e===Ee)for(let o=1;o<=a;o++)n.push(t.getX(0)),n.push(t.getX(o)),n.push(t.getX(o+1));else for(let o=0;o<a;o++)o%2===0?(n.push(t.getX(o)),n.push(t.getX(o+1)),n.push(t.getX(o+2))):(n.push(t.getX(o+2)),n.push(t.getX(o+1)),n.push(t.getX(o)));n.length/3!==a&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const r=i.clone();return r.setIndex(n),r.clearGroups(),r}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),i}class wt extends zt{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new xi(t)}),this.register(function(t){return new wi(t)}),this.register(function(t){return new Hi(t)}),this.register(function(t){return new Oi(t)}),this.register(function(t){return new zi(t)}),this.register(function(t){return new Li(t)}),this.register(function(t){return new Ei(t)}),this.register(function(t){return new Qi(t)}),this.register(function(t){return new Ci(t)}),this.register(function(t){return new Bi(t)}),this.register(function(t){return new _i(t)}),this.register(function(t){return new Fi(t)}),this.register(function(t){return new Ni(t)}),this.register(function(t){return new Di(t)}),this.register(function(t){return new Mi(t)}),this.register(function(t){return new Ui(t)}),this.register(function(t){return new Gi(t)})}load(e,t,a,n){const r=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const l=ie.extractUrlBase(e);o=ie.resolveURL(l,this.path)}else o=ie.extractUrlBase(e);this.manager.itemStart(e);const s=function(l){n?n(l):console.error(l),r.manager.itemError(e),r.manager.itemEnd(e)},c=new ft(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(l){try{r.parse(l,o,function(m){t(m),r.manager.itemEnd(e)},s)}catch(m){s(m)}},a,s)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,a,n){let r;const o={},s={},c=new TextDecoder;if(typeof e=="string")r=JSON.parse(e);else if(e instanceof ArrayBuffer)if(c.decode(new Uint8Array(e,0,4))===Ft){try{o[P.KHR_BINARY_GLTF]=new Ki(e)}catch(d){n&&n(d);return}r=JSON.parse(o[P.KHR_BINARY_GLTF].content)}else r=JSON.parse(c.decode(e));else r=e;if(r.asset===void 0||r.asset.version[0]<2){n&&n(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new nn(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let m=0;m<this.pluginCallbacks.length;m++){const d=this.pluginCallbacks[m](l);d.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),s[d.name]=d,o[d.name]=!0}if(r.extensionsUsed)for(let m=0;m<r.extensionsUsed.length;++m){const d=r.extensionsUsed[m],u=r.extensionsRequired||[];switch(d){case P.KHR_MATERIALS_UNLIT:o[d]=new Si;break;case P.KHR_DRACO_MESH_COMPRESSION:o[d]=new Vi(r,this.dracoLoader);break;case P.KHR_TEXTURE_TRANSFORM:o[d]=new Xi;break;case P.KHR_MESH_QUANTIZATION:o[d]=new Wi;break;default:u.indexOf(d)>=0&&s[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}l.setExtensions(o),l.setPlugins(s),l.parse(a,n)}parseAsync(e,t){const a=this;return new Promise(function(n,r){a.parse(e,t,n,r)})}}function yi(){let i={};return{get:function(e){return i[e]},add:function(e,t){i[e]=t},remove:function(e){delete i[e]},removeAll:function(){i={}}}}const P={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Mi{constructor(e){this.parser=e,this.name=P.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let a=0,n=t.length;a<n;a++){const r=t[a];r.extensions&&r.extensions[this.name]&&r.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,a="light:"+e;let n=t.cache.get(a);if(n)return n;const r=t.json,c=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let l;const m=new k(16777215);c.color!==void 0&&m.setRGB(c.color[0],c.color[1],c.color[2],z);const d=c.range!==void 0?c.range:0;switch(c.type){case"directional":l=new Qe(m),l.target.position.set(0,0,-1),l.add(l.target);break;case"point":l=new Gt(m),l.distance=d;break;case"spot":l=new Ut(m),l.distance=d,c.spot=c.spot||{},c.spot.innerConeAngle=c.spot.innerConeAngle!==void 0?c.spot.innerConeAngle:0,c.spot.outerConeAngle=c.spot.outerConeAngle!==void 0?c.spot.outerConeAngle:Math.PI/4,l.angle=c.spot.outerConeAngle,l.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,l.target.position.set(0,0,-1),l.add(l.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return l.position.set(0,0,0),D(l,c),c.intensity!==void 0&&(l.intensity=c.intensity),l.name=t.createUniqueName(c.name||"light_"+e),n=Promise.resolve(l),t.cache.add(a,n),n}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,a=this.parser,r=a.json.nodes[e],s=(r.extensions&&r.extensions[this.name]||{}).light;return s===void 0?null:this._loadLight(s).then(function(c){return a._getNodeRef(t.cache,s,c)})}}class Si{constructor(){this.name=P.KHR_MATERIALS_UNLIT}getMaterialType(){return K}extendParams(e,t,a){const n=[];e.color=new k(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const o=r.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],z),e.opacity=o[3]}r.baseColorTexture!==void 0&&n.push(a.assignTexture(e,"map",r.baseColorTexture,ne))}return Promise.all(n)}}class Bi{constructor(e){this.parser=e,this.name=P.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name].emissiveStrength;return r!==void 0&&(t.emissiveIntensity=r),Promise.resolve()}}class xi{constructor(e){this.parser=e,this.name=P.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const a=this.parser.json.materials[e];return!a.extensions||!a.extensions[this.name]?null:O}extendMaterialParams(e,t){const a=this.parser,n=a.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],o=n.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&r.push(a.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&r.push(a.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(r.push(a.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const s=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new ve(s,s)}return Promise.all(r)}}class wi{constructor(e){this.parser=e,this.name=P.KHR_MATERIALS_DISPERSION}getMaterialType(e){const a=this.parser.json.materials[e];return!a.extensions||!a.extensions[this.name]?null:O}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name];return t.dispersion=r.dispersion!==void 0?r.dispersion:0,Promise.resolve()}}class Fi{constructor(e){this.parser=e,this.name=P.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const a=this.parser.json.materials[e];return!a.extensions||!a.extensions[this.name]?null:O}extendMaterialParams(e,t){const a=this.parser,n=a.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],o=n.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&r.push(a.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&r.push(a.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(r)}}class Li{constructor(e){this.parser=e,this.name=P.KHR_MATERIALS_SHEEN}getMaterialType(e){const a=this.parser.json.materials[e];return!a.extensions||!a.extensions[this.name]?null:O}extendMaterialParams(e,t){const a=this.parser,n=a.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[];t.sheenColor=new k(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=n.extensions[this.name];if(o.sheenColorFactor!==void 0){const s=o.sheenColorFactor;t.sheenColor.setRGB(s[0],s[1],s[2],z)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&r.push(a.assignTexture(t,"sheenColorMap",o.sheenColorTexture,ne)),o.sheenRoughnessTexture!==void 0&&r.push(a.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(r)}}class Ei{constructor(e){this.parser=e,this.name=P.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const a=this.parser.json.materials[e];return!a.extensions||!a.extensions[this.name]?null:O}extendMaterialParams(e,t){const a=this.parser,n=a.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],o=n.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&r.push(a.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(r)}}class Qi{constructor(e){this.parser=e,this.name=P.KHR_MATERIALS_VOLUME}getMaterialType(e){const a=this.parser.json.materials[e];return!a.extensions||!a.extensions[this.name]?null:O}extendMaterialParams(e,t){const a=this.parser,n=a.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],o=n.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&r.push(a.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const s=o.attenuationColor||[1,1,1];return t.attenuationColor=new k().setRGB(s[0],s[1],s[2],z),Promise.all(r)}}class Ci{constructor(e){this.parser=e,this.name=P.KHR_MATERIALS_IOR}getMaterialType(e){const a=this.parser.json.materials[e];return!a.extensions||!a.extensions[this.name]?null:O}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name];return t.ior=r.ior!==void 0?r.ior:1.5,Promise.resolve()}}class _i{constructor(e){this.parser=e,this.name=P.KHR_MATERIALS_SPECULAR}getMaterialType(e){const a=this.parser.json.materials[e];return!a.extensions||!a.extensions[this.name]?null:O}extendMaterialParams(e,t){const a=this.parser,n=a.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],o=n.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&r.push(a.assignTexture(t,"specularIntensityMap",o.specularTexture));const s=o.specularColorFactor||[1,1,1];return t.specularColor=new k().setRGB(s[0],s[1],s[2],z),o.specularColorTexture!==void 0&&r.push(a.assignTexture(t,"specularColorMap",o.specularColorTexture,ne)),Promise.all(r)}}class Di{constructor(e){this.parser=e,this.name=P.EXT_MATERIALS_BUMP}getMaterialType(e){const a=this.parser.json.materials[e];return!a.extensions||!a.extensions[this.name]?null:O}extendMaterialParams(e,t){const a=this.parser,n=a.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],o=n.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&r.push(a.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(r)}}class Ni{constructor(e){this.parser=e,this.name=P.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const a=this.parser.json.materials[e];return!a.extensions||!a.extensions[this.name]?null:O}extendMaterialParams(e,t){const a=this.parser,n=a.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],o=n.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&r.push(a.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(r)}}class Hi{constructor(e){this.parser=e,this.name=P.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,a=t.json,n=a.textures[e];if(!n.extensions||!n.extensions[this.name])return null;const r=n.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(a.extensionsRequired&&a.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,r.source,o)}}class Oi{constructor(e){this.parser=e,this.name=P.EXT_TEXTURE_WEBP}loadTexture(e){const t=this.name,a=this.parser,n=a.json,r=n.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],s=n.images[o.source];let c=a.textureLoader;if(s.uri){const l=a.options.manager.getHandler(s.uri);l!==null&&(c=l)}return a.loadTextureImage(e,o.source,c)}}class zi{constructor(e){this.parser=e,this.name=P.EXT_TEXTURE_AVIF}loadTexture(e){const t=this.name,a=this.parser,n=a.json,r=n.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],s=n.images[o.source];let c=a.textureLoader;if(s.uri){const l=a.options.manager.getHandler(s.uri);l!==null&&(c=l)}return a.loadTextureImage(e,o.source,c)}}class Ui{constructor(e){this.name=P.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,a=t.bufferViews[e];if(a.extensions&&a.extensions[this.name]){const n=a.extensions[this.name],r=this.parser.getDependency("buffer",n.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then(function(s){const c=n.byteOffset||0,l=n.byteLength||0,m=n.count,d=n.byteStride,u=new Uint8Array(s,c,l);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(m,d,u,n.mode,n.filter).then(function(g){return g.buffer}):o.ready.then(function(){const g=new ArrayBuffer(m*d);return o.decodeGltfBuffer(new Uint8Array(g),m,d,u,n.mode,n.filter),g})})}else return null}}class Gi{constructor(e){this.name=P.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,a=t.nodes[e];if(!a.extensions||!a.extensions[this.name]||a.mesh===void 0)return null;const n=t.meshes[a.mesh];for(const l of n.primitives)if(l.mode!==L.TRIANGLES&&l.mode!==L.TRIANGLE_STRIP&&l.mode!==L.TRIANGLE_FAN&&l.mode!==void 0)return null;const o=a.extensions[this.name].attributes,s=[],c={};for(const l in o)s.push(this.parser.getDependency("accessor",o[l]).then(m=>(c[l]=m,c[l])));return s.length<1?null:(s.push(this.parser.createNodeMesh(e)),Promise.all(s).then(l=>{const m=l.pop(),d=m.isGroup?m.children:[m],u=l[0].count,g=[];for(const p of d){const v=new ae,T=new x,f=new pt,I=new x(1,1,1),R=new Kt(p.geometry,p.material,u);for(let h=0;h<u;h++)c.TRANSLATION&&T.fromBufferAttribute(c.TRANSLATION,h),c.ROTATION&&f.fromBufferAttribute(c.ROTATION,h),c.SCALE&&I.fromBufferAttribute(c.SCALE,h),R.setMatrixAt(h,v.compose(T,f,I));for(const h in c)if(h==="_COLOR_0"){const b=c[h];R.instanceColor=new Vt(b.array,b.itemSize,b.normalized)}else h!=="TRANSLATION"&&h!=="ROTATION"&&h!=="SCALE"&&p.geometry.setAttribute(h,c[h]);ht.prototype.copy.call(R,p),this.parser.assignFinalMaterial(R),g.push(R)}return m.isGroup?(m.clear(),m.add(...g),m):g[0]}))}}const Ft="glTF",te=12,$e={JSON:1313821514,BIN:5130562};class Ki{constructor(e){this.name=P.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,te),a=new TextDecoder;if(this.header={magic:a.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Ft)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-te,r=new DataView(e,te);let o=0;for(;o<n;){const s=r.getUint32(o,!0);o+=4;const c=r.getUint32(o,!0);if(o+=4,c===$e.JSON){const l=new Uint8Array(e,te+o,s);this.content=a.decode(l)}else if(c===$e.BIN){const l=te+o;this.body=e.slice(l,l+s)}o+=s}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Vi{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=P.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const a=this.json,n=this.dracoLoader,r=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,s={},c={},l={};for(const m in o){const d=Ne[m]||m.toLowerCase();s[d]=o[m]}for(const m in e.attributes){const d=Ne[m]||m.toLowerCase();if(o[m]!==void 0){const u=a.accessors[e.attributes[m]],g=j[u.componentType];l[d]=g.name,c[d]=u.normalized===!0}}return t.getDependency("bufferView",r).then(function(m){return new Promise(function(d,u){n.decodeDracoFile(m,function(g){for(const p in g.attributes){const v=g.attributes[p],T=c[p];T!==void 0&&(v.normalized=T)}d(g)},s,l,z,u)})})}}class Xi{constructor(){this.name=P.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class Wi{constructor(){this.name=P.KHR_MESH_QUANTIZATION}}class Lt extends mi{constructor(e,t,a,n){super(e,t,a,n)}copySampleValue_(e){const t=this.resultBuffer,a=this.sampleValues,n=this.valueSize,r=e*n*3+n;for(let o=0;o!==n;o++)t[o]=a[r+o];return t}interpolate_(e,t,a,n){const r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,c=s*2,l=s*3,m=n-t,d=(a-t)/m,u=d*d,g=u*d,p=e*l,v=p-l,T=-2*g+3*u,f=g-u,I=1-T,R=f-u+d;for(let h=0;h!==s;h++){const b=o[v+h+s],F=o[v+h+c]*m,w=o[p+h+s],ee=o[p+h]*m;r[h]=I*b+R*F+T*w+f*ee}return r}}const qi=new pt;class ki extends Lt{interpolate_(e,t,a,n){const r=super.interpolate_(e,t,a,n);return qi.fromArray(r).normalize().toArray(r),r}}const L={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},j={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},je={9728:Pt,9729:Ce,9984:Yt,9985:kt,9986:qt,9987:vt},et={33071:Jt,33648:Zt,10497:_e},be={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Ne={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},U={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Yi={CUBICSPLINE:void 0,LINEAR:Mt,STEP:ci},ye={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Zi(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new Rt({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:li})),i.DefaultMaterial}function V(i,e,t){for(const a in t.extensions)i[a]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[a]=t.extensions[a])}function D(i,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(i.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Ji(i,e,t){let a=!1,n=!1,r=!1;for(let l=0,m=e.length;l<m;l++){const d=e[l];if(d.POSITION!==void 0&&(a=!0),d.NORMAL!==void 0&&(n=!0),d.COLOR_0!==void 0&&(r=!0),a&&n&&r)break}if(!a&&!n&&!r)return Promise.resolve(i);const o=[],s=[],c=[];for(let l=0,m=e.length;l<m;l++){const d=e[l];if(a){const u=d.POSITION!==void 0?t.getDependency("accessor",d.POSITION):i.attributes.position;o.push(u)}if(n){const u=d.NORMAL!==void 0?t.getDependency("accessor",d.NORMAL):i.attributes.normal;s.push(u)}if(r){const u=d.COLOR_0!==void 0?t.getDependency("accessor",d.COLOR_0):i.attributes.color;c.push(u)}}return Promise.all([Promise.all(o),Promise.all(s),Promise.all(c)]).then(function(l){const m=l[0],d=l[1],u=l[2];return a&&(i.morphAttributes.position=m),n&&(i.morphAttributes.normal=d),r&&(i.morphAttributes.color=u),i.morphTargetsRelative=!0,i})}function $i(i,e){if(i.updateMorphTargets(),e.weights!==void 0)for(let t=0,a=e.weights.length;t<a;t++)i.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(i.morphTargetInfluences.length===t.length){i.morphTargetDictionary={};for(let a=0,n=t.length;a<n;a++)i.morphTargetDictionary[t[a]]=a}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function ji(i){let e;const t=i.extensions&&i.extensions[P.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+Me(t.attributes):e=i.indices+":"+Me(i.attributes)+":"+i.mode,i.targets!==void 0)for(let a=0,n=i.targets.length;a<n;a++)e+=":"+Me(i.targets[a]);return e}function Me(i){let e="";const t=Object.keys(i).sort();for(let a=0,n=t.length;a<n;a++)e+=t[a]+":"+i[t[a]]+";";return e}function He(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function en(i){return i.search(/\.jpe?g($|\?)/i)>0||i.search(/^data\:image\/jpeg/)===0?"image/jpeg":i.search(/\.webp($|\?)/i)>0||i.search(/^data\:image\/webp/)===0?"image/webp":i.search(/\.ktx2($|\?)/i)>0||i.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}const tn=new ae;class nn{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new yi,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let a=!1,n=-1,r=!1,o=-1;if(typeof navigator<"u"){const s=navigator.userAgent;a=/^((?!chrome|android).)*safari/i.test(s)===!0;const c=s.match(/Version\/(\d+)/);n=a&&c?parseInt(c[1],10):-1,r=s.indexOf("Firefox")>-1,o=r?s.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||a&&n<17||r&&o<98?this.textureLoader=new he(this.options.manager):this.textureLoader=new Xt(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new ft(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const a=this,n=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([a.getDependencies("scene"),a.getDependencies("animation"),a.getDependencies("camera")])}).then(function(o){const s={scene:o[0][n.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:n.asset,parser:a,userData:{}};return V(r,s,n),D(s,n),Promise.all(a._invokeAll(function(c){return c.afterRoot&&c.afterRoot(s)})).then(function(){for(const c of s.scenes)c.updateMatrixWorld();e(s)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],a=this.json.meshes||[];for(let n=0,r=t.length;n<r;n++){const o=t[n].joints;for(let s=0,c=o.length;s<c;s++)e[o[s]].isBone=!0}for(let n=0,r=e.length;n<r;n++){const o=e[n];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(a[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,a){if(e.refs[t]<=1)return a;const n=a.clone(),r=(o,s)=>{const c=this.associations.get(o);c!=null&&this.associations.set(s,c);for(const[l,m]of o.children.entries())r(m,s.children[l])};return r(a,n),n.name+="_instance_"+e.uses[t]++,n}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let a=0;a<t.length;a++){const n=e(t[a]);if(n)return n}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const a=[];for(let n=0;n<t.length;n++){const r=e(t[n]);r&&a.push(r)}return a}getDependency(e,t){const a=e+":"+t;let n=this.cache.get(a);if(!n){switch(e){case"scene":n=this.loadScene(t);break;case"node":n=this._invokeOne(function(r){return r.loadNode&&r.loadNode(t)});break;case"mesh":n=this._invokeOne(function(r){return r.loadMesh&&r.loadMesh(t)});break;case"accessor":n=this.loadAccessor(t);break;case"bufferView":n=this._invokeOne(function(r){return r.loadBufferView&&r.loadBufferView(t)});break;case"buffer":n=this.loadBuffer(t);break;case"material":n=this._invokeOne(function(r){return r.loadMaterial&&r.loadMaterial(t)});break;case"texture":n=this._invokeOne(function(r){return r.loadTexture&&r.loadTexture(t)});break;case"skin":n=this.loadSkin(t);break;case"animation":n=this._invokeOne(function(r){return r.loadAnimation&&r.loadAnimation(t)});break;case"camera":n=this.loadCamera(t);break;default:if(n=this._invokeOne(function(r){return r!=this&&r.getDependency&&r.getDependency(e,t)}),!n)throw new Error("Unknown type: "+e);break}this.cache.add(a,n)}return n}getDependencies(e){let t=this.cache.get(e);if(!t){const a=this,n=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(n.map(function(r,o){return a.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],a=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[P.KHR_BINARY_GLTF].body);const n=this.options;return new Promise(function(r,o){a.load(ie.resolveURL(t.uri,n.path),r,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(a){const n=t.byteLength||0,r=t.byteOffset||0;return a.slice(r,r+n)})}loadAccessor(e){const t=this,a=this.json,n=this.json.accessors[e];if(n.bufferView===void 0&&n.sparse===void 0){const o=be[n.type],s=j[n.componentType],c=n.normalized===!0,l=new s(n.count*o);return Promise.resolve(new de(l,o,c))}const r=[];return n.bufferView!==void 0?r.push(this.getDependency("bufferView",n.bufferView)):r.push(null),n.sparse!==void 0&&(r.push(this.getDependency("bufferView",n.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",n.sparse.values.bufferView))),Promise.all(r).then(function(o){const s=o[0],c=be[n.type],l=j[n.componentType],m=l.BYTES_PER_ELEMENT,d=m*c,u=n.byteOffset||0,g=n.bufferView!==void 0?a.bufferViews[n.bufferView].byteStride:void 0,p=n.normalized===!0;let v,T;if(g&&g!==d){const f=Math.floor(u/g),I="InterleavedBuffer:"+n.bufferView+":"+n.componentType+":"+f+":"+n.count;let R=t.cache.get(I);R||(v=new l(s,f*g,n.count*g/m),R=new Wt(v,g/m),t.cache.add(I,R)),T=new W(R,c,u%g/m,p)}else s===null?v=new l(n.count*c):v=new l(s,u,n.count*c),T=new de(v,c,p);if(n.sparse!==void 0){const f=be.SCALAR,I=j[n.sparse.indices.componentType],R=n.sparse.indices.byteOffset||0,h=n.sparse.values.byteOffset||0,b=new I(o[1],R,n.sparse.count*f),F=new l(o[2],h,n.sparse.count*c);s!==null&&(T=new de(T.array.slice(),T.itemSize,T.normalized)),T.normalized=!1;for(let w=0,ee=b.length;w<ee;w++){const Z=b[w];if(T.setX(Z,F[w*c]),c>=2&&T.setY(Z,F[w*c+1]),c>=3&&T.setZ(Z,F[w*c+2]),c>=4&&T.setW(Z,F[w*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}T.normalized=p}return T})}loadTexture(e){const t=this.json,a=this.options,r=t.textures[e].source,o=t.images[r];let s=this.textureLoader;if(o.uri){const c=a.manager.getHandler(o.uri);c!==null&&(s=c)}return this.loadTextureImage(e,r,s)}loadTextureImage(e,t,a){const n=this,r=this.json,o=r.textures[e],s=r.images[t],c=(s.uri||s.bufferView)+":"+o.sampler;if(this.textureCache[c])return this.textureCache[c];const l=this.loadImageSource(t,a).then(function(m){m.flipY=!1,m.name=o.name||s.name||"",m.name===""&&typeof s.uri=="string"&&s.uri.startsWith("data:image/")===!1&&(m.name=s.uri);const u=(r.samplers||{})[o.sampler]||{};return m.magFilter=je[u.magFilter]||Ce,m.minFilter=je[u.minFilter]||vt,m.wrapS=et[u.wrapS]||_e,m.wrapT=et[u.wrapT]||_e,m.generateMipmaps=!m.isCompressedTexture&&m.minFilter!==Pt&&m.minFilter!==Ce,n.associations.set(m,{textures:e}),m}).catch(function(){return null});return this.textureCache[c]=l,l}loadImageSource(e,t){const a=this,n=this.json,r=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(d=>d.clone());const o=n.images[e],s=self.URL||self.webkitURL;let c=o.uri||"",l=!1;if(o.bufferView!==void 0)c=a.getDependency("bufferView",o.bufferView).then(function(d){l=!0;const u=new Blob([d],{type:o.mimeType});return c=s.createObjectURL(u),c});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const m=Promise.resolve(c).then(function(d){return new Promise(function(u,g){let p=u;t.isImageBitmapLoader===!0&&(p=function(v){const T=new Xe(v);T.needsUpdate=!0,u(T)}),t.load(ie.resolveURL(d,r.path),p,void 0,g)})}).then(function(d){return l===!0&&s.revokeObjectURL(c),D(d,o),d.userData.mimeType=o.mimeType||en(o.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),d});return this.sourceCache[e]=m,m}assignTexture(e,t,a,n){const r=this;return this.getDependency("texture",a.index).then(function(o){if(!o)return null;if(a.texCoord!==void 0&&a.texCoord>0&&(o=o.clone(),o.channel=a.texCoord),r.extensions[P.KHR_TEXTURE_TRANSFORM]){const s=a.extensions!==void 0?a.extensions[P.KHR_TEXTURE_TRANSFORM]:void 0;if(s){const c=r.associations.get(o);o=r.extensions[P.KHR_TEXTURE_TRANSFORM].extendTexture(o,s),r.associations.set(o,c)}}return n!==void 0&&(o.colorSpace=n),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let a=e.material;const n=t.attributes.tangent===void 0,r=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const s="PointsMaterial:"+a.uuid;let c=this.cache.get(s);c||(c=new gt,Ie.prototype.copy.call(c,a),c.color.copy(a.color),c.map=a.map,c.sizeAttenuation=!1,this.cache.add(s,c)),a=c}else if(e.isLine){const s="LineBasicMaterial:"+a.uuid;let c=this.cache.get(s);c||(c=new $t,Ie.prototype.copy.call(c,a),c.color.copy(a.color),c.map=a.map,this.cache.add(s,c)),a=c}if(n||r||o){let s="ClonedMaterial:"+a.uuid+":";n&&(s+="derivative-tangents:"),r&&(s+="vertex-colors:"),o&&(s+="flat-shading:");let c=this.cache.get(s);c||(c=a.clone(),r&&(c.vertexColors=!0),o&&(c.flatShading=!0),n&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(s,c),this.associations.set(c,this.associations.get(a))),a=c}e.material=a}getMaterialType(){return Rt}loadMaterial(e){const t=this,a=this.json,n=this.extensions,r=a.materials[e];let o;const s={},c=r.extensions||{},l=[];if(c[P.KHR_MATERIALS_UNLIT]){const d=n[P.KHR_MATERIALS_UNLIT];o=d.getMaterialType(),l.push(d.extendParams(s,r,t))}else{const d=r.pbrMetallicRoughness||{};if(s.color=new k(1,1,1),s.opacity=1,Array.isArray(d.baseColorFactor)){const u=d.baseColorFactor;s.color.setRGB(u[0],u[1],u[2],z),s.opacity=u[3]}d.baseColorTexture!==void 0&&l.push(t.assignTexture(s,"map",d.baseColorTexture,ne)),s.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,s.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(l.push(t.assignTexture(s,"metalnessMap",d.metallicRoughnessTexture)),l.push(t.assignTexture(s,"roughnessMap",d.metallicRoughnessTexture))),o=this._invokeOne(function(u){return u.getMaterialType&&u.getMaterialType(e)}),l.push(Promise.all(this._invokeAll(function(u){return u.extendMaterialParams&&u.extendMaterialParams(e,s)})))}r.doubleSided===!0&&(s.side=At);const m=r.alphaMode||ye.OPAQUE;if(m===ye.BLEND?(s.transparent=!0,s.depthWrite=!1):(s.transparent=!1,m===ye.MASK&&(s.alphaTest=r.alphaCutoff!==void 0?r.alphaCutoff:.5)),r.normalTexture!==void 0&&o!==K&&(l.push(t.assignTexture(s,"normalMap",r.normalTexture)),s.normalScale=new ve(1,1),r.normalTexture.scale!==void 0)){const d=r.normalTexture.scale;s.normalScale.set(d,d)}if(r.occlusionTexture!==void 0&&o!==K&&(l.push(t.assignTexture(s,"aoMap",r.occlusionTexture)),r.occlusionTexture.strength!==void 0&&(s.aoMapIntensity=r.occlusionTexture.strength)),r.emissiveFactor!==void 0&&o!==K){const d=r.emissiveFactor;s.emissive=new k().setRGB(d[0],d[1],d[2],z)}return r.emissiveTexture!==void 0&&o!==K&&l.push(t.assignTexture(s,"emissiveMap",r.emissiveTexture,ne)),Promise.all(l).then(function(){const d=new o(s);return r.name&&(d.name=r.name),D(d,r),t.associations.set(d,{materials:e}),r.extensions&&V(n,d,r),d})}createUniqueName(e){const t=jt.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,a=this.extensions,n=this.primitiveCache;function r(s){return a[P.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(s,t).then(function(c){return tt(c,s,t)})}const o=[];for(let s=0,c=e.length;s<c;s++){const l=e[s],m=ji(l),d=n[m];if(d)o.push(d.promise);else{let u;l.extensions&&l.extensions[P.KHR_DRACO_MESH_COMPRESSION]?u=r(l):u=tt(new ut,l,t),n[m]={primitive:l,promise:u},o.push(u)}}return Promise.all(o)}loadMesh(e){const t=this,a=this.json,n=this.extensions,r=a.meshes[e],o=r.primitives,s=[];for(let c=0,l=o.length;c<l;c++){const m=o[c].material===void 0?Zi(this.cache):this.getDependency("material",o[c].material);s.push(m)}return s.push(t.loadGeometries(o)),Promise.all(s).then(function(c){const l=c.slice(0,c.length-1),m=c[c.length-1],d=[];for(let g=0,p=m.length;g<p;g++){const v=m[g],T=o[g];let f;const I=l[g];if(T.mode===L.TRIANGLES||T.mode===L.TRIANGLE_STRIP||T.mode===L.TRIANGLE_FAN||T.mode===void 0)f=r.isSkinnedMesh===!0?new ei(v,I):new oe(v,I),f.isSkinnedMesh===!0&&f.normalizeSkinWeights(),T.mode===L.TRIANGLE_STRIP?f.geometry=Je(f.geometry,Tt):T.mode===L.TRIANGLE_FAN&&(f.geometry=Je(f.geometry,Ee));else if(T.mode===L.LINES)f=new ti(v,I);else if(T.mode===L.LINE_STRIP)f=new ii(v,I);else if(T.mode===L.LINE_LOOP)f=new ni(v,I);else if(T.mode===L.POINTS)f=new It(v,I);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+T.mode);Object.keys(f.geometry.morphAttributes).length>0&&$i(f,r),f.name=t.createUniqueName(r.name||"mesh_"+e),D(f,r),T.extensions&&V(n,f,T),t.assignFinalMaterial(f),d.push(f)}for(let g=0,p=d.length;g<p;g++)t.associations.set(d[g],{meshes:e,primitives:g});if(d.length===1)return r.extensions&&V(n,d[0],r),d[0];const u=new $;r.extensions&&V(n,u,r),t.associations.set(u,{meshes:e});for(let g=0,p=d.length;g<p;g++)u.add(d[g]);return u})}loadCamera(e){let t;const a=this.json.cameras[e],n=a[a.type];if(!n){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return a.type==="perspective"?t=new bt(yt.radToDeg(n.yfov),n.aspectRatio||1,n.znear||1,n.zfar||2e6):a.type==="orthographic"&&(t=new ai(-n.xmag,n.xmag,n.ymag,-n.ymag,n.znear,n.zfar)),a.name&&(t.name=this.createUniqueName(a.name)),D(t,a),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],a=[];for(let n=0,r=t.joints.length;n<r;n++)a.push(this._loadNodeShallow(t.joints[n]));return t.inverseBindMatrices!==void 0?a.push(this.getDependency("accessor",t.inverseBindMatrices)):a.push(null),Promise.all(a).then(function(n){const r=n.pop(),o=n,s=[],c=[];for(let l=0,m=o.length;l<m;l++){const d=o[l];if(d){s.push(d);const u=new ae;r!==null&&u.fromArray(r.array,l*16),c.push(u)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[l])}return new ri(s,c)})}loadAnimation(e){const t=this.json,a=this,n=t.animations[e],r=n.name?n.name:"animation_"+e,o=[],s=[],c=[],l=[],m=[];for(let d=0,u=n.channels.length;d<u;d++){const g=n.channels[d],p=n.samplers[g.sampler],v=g.target,T=v.node,f=n.parameters!==void 0?n.parameters[p.input]:p.input,I=n.parameters!==void 0?n.parameters[p.output]:p.output;v.node!==void 0&&(o.push(this.getDependency("node",T)),s.push(this.getDependency("accessor",f)),c.push(this.getDependency("accessor",I)),l.push(p),m.push(v))}return Promise.all([Promise.all(o),Promise.all(s),Promise.all(c),Promise.all(l),Promise.all(m)]).then(function(d){const u=d[0],g=d[1],p=d[2],v=d[3],T=d[4],f=[];for(let R=0,h=u.length;R<h;R++){const b=u[R],F=g[R],w=p[R],ee=v[R],Z=T[R];if(b===void 0)continue;b.updateMatrix&&b.updateMatrix();const Re=a._createAnimationTracks(b,F,w,ee,Z);if(Re)for(let Ae=0;Ae<Re.length;Ae++)f.push(Re[Ae])}const I=new oi(r,void 0,f);return D(I,n),I})}createNodeMesh(e){const t=this.json,a=this,n=t.nodes[e];return n.mesh===void 0?null:a.getDependency("mesh",n.mesh).then(function(r){const o=a._getNodeRef(a.meshCache,n.mesh,r);return n.weights!==void 0&&o.traverse(function(s){if(s.isMesh)for(let c=0,l=n.weights.length;c<l;c++)s.morphTargetInfluences[c]=n.weights[c]}),o})}loadNode(e){const t=this.json,a=this,n=t.nodes[e],r=a._loadNodeShallow(e),o=[],s=n.children||[];for(let l=0,m=s.length;l<m;l++)o.push(a.getDependency("node",s[l]));const c=n.skin===void 0?Promise.resolve(null):a.getDependency("skin",n.skin);return Promise.all([r,Promise.all(o),c]).then(function(l){const m=l[0],d=l[1],u=l[2];u!==null&&m.traverse(function(g){g.isSkinnedMesh&&g.bind(u,tn)});for(let g=0,p=d.length;g<p;g++)m.add(d[g]);return m})}_loadNodeShallow(e){const t=this.json,a=this.extensions,n=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const r=t.nodes[e],o=r.name?n.createUniqueName(r.name):"",s=[],c=n._invokeOne(function(l){return l.createNodeMesh&&l.createNodeMesh(e)});return c&&s.push(c),r.camera!==void 0&&s.push(n.getDependency("camera",r.camera).then(function(l){return n._getNodeRef(n.cameraCache,r.camera,l)})),n._invokeAll(function(l){return l.createNodeAttachment&&l.createNodeAttachment(e)}).forEach(function(l){s.push(l)}),this.nodeCache[e]=Promise.all(s).then(function(l){let m;if(r.isBone===!0?m=new si:l.length>1?m=new $:l.length===1?m=l[0]:m=new ht,m!==l[0])for(let d=0,u=l.length;d<u;d++)m.add(l[d]);if(r.name&&(m.userData.name=r.name,m.name=o),D(m,r),r.extensions&&V(a,m,r),r.matrix!==void 0){const d=new ae;d.fromArray(r.matrix),m.applyMatrix4(d)}else r.translation!==void 0&&m.position.fromArray(r.translation),r.rotation!==void 0&&m.quaternion.fromArray(r.rotation),r.scale!==void 0&&m.scale.fromArray(r.scale);if(!n.associations.has(m))n.associations.set(m,{});else if(r.mesh!==void 0&&n.meshCache.refs[r.mesh]>1){const d=n.associations.get(m);n.associations.set(m,{...d})}return n.associations.get(m).nodes=e,m}),this.nodeCache[e]}loadScene(e){const t=this.extensions,a=this.json.scenes[e],n=this,r=new $;a.name&&(r.name=n.createUniqueName(a.name)),D(r,a),a.extensions&&V(t,r,a);const o=a.nodes||[],s=[];for(let c=0,l=o.length;c<l;c++)s.push(n.getDependency("node",o[c]));return Promise.all(s).then(function(c){for(let m=0,d=c.length;m<d;m++)r.add(c[m]);const l=m=>{const d=new Map;for(const[u,g]of n.associations)(u instanceof Ie||u instanceof Xe)&&d.set(u,g);return m.traverse(u=>{const g=n.associations.get(u);g!=null&&d.set(u,g)}),d};return n.associations=l(r),r})}_createAnimationTracks(e,t,a,n,r){const o=[],s=e.name?e.name:e.uuid,c=[];U[r.path]===U.weights?e.traverse(function(u){u.morphTargetInfluences&&c.push(u.name?u.name:u.uuid)}):c.push(s);let l;switch(U[r.path]){case U.weights:l=qe;break;case U.rotation:l=ke;break;case U.translation:case U.scale:l=We;break;default:switch(a.itemSize){case 1:l=qe;break;case 2:case 3:default:l=We;break}break}const m=n.interpolation!==void 0?Yi[n.interpolation]:Mt,d=this._getArrayFromAccessor(a);for(let u=0,g=c.length;u<g;u++){const p=new l(c[u]+"."+U[r.path],t.array,d,m);n.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(p),o.push(p)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const a=He(t.constructor),n=new Float32Array(t.length);for(let r=0,o=t.length;r<o;r++)n[r]=t[r]*a;t=n}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(a){const n=this instanceof ke?ki:Lt;return new n(this.times,this.values,this.getValueSize()/3,a)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function an(i,e,t){const a=e.attributes,n=new Pe;if(a.POSITION!==void 0){const s=t.json.accessors[a.POSITION],c=s.min,l=s.max;if(c!==void 0&&l!==void 0){if(n.set(new x(c[0],c[1],c[2]),new x(l[0],l[1],l[2])),s.normalized){const m=He(j[s.componentType]);n.min.multiplyScalar(m),n.max.multiplyScalar(m)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const r=e.targets;if(r!==void 0){const s=new x,c=new x;for(let l=0,m=r.length;l<m;l++){const d=r[l];if(d.POSITION!==void 0){const u=t.json.accessors[d.POSITION],g=u.min,p=u.max;if(g!==void 0&&p!==void 0){if(c.setX(Math.max(Math.abs(g[0]),Math.abs(p[0]))),c.setY(Math.max(Math.abs(g[1]),Math.abs(p[1]))),c.setZ(Math.max(Math.abs(g[2]),Math.abs(p[2]))),u.normalized){const v=He(j[u.componentType]);c.multiplyScalar(v)}s.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}n.expandByVector(s)}i.boundingBox=n;const o=new Ge;n.getCenter(o.center),o.radius=n.min.distanceTo(n.max)/2,i.boundingSphere=o}function tt(i,e,t){const a=e.attributes,n=[];function r(o,s){return t.getDependency("accessor",o).then(function(c){i.setAttribute(s,c)})}for(const o in a){const s=Ne[o]||o.toLowerCase();s in i.attributes||n.push(r(a[o],s))}if(e.indices!==void 0&&!i.index){const o=t.getDependency("accessor",e.indices).then(function(s){i.setIndex(s)});n.push(o)}return Ye.workingColorSpace!==z&&"COLOR_0"in a&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Ye.workingColorSpace}" not supported.`),D(i,e),an(i,e,t),Promise.all(n).then(function(){return e.targets!==void 0?Ji(i,e.targets,t):i})}ge.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new ve(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}};ue.line={uniforms:St.merge([ge.common,ge.fog,ge.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 tmpFwd = normalize( mix( start.xyz, end.xyz, 0.5 ) );
				vec3 worldUp = normalize( cross( worldDir, tmpFwd ) );
				vec3 worldFwd = cross( worldDir, worldUp );
				worldPos = position.y < 0.5 ? start: end;

				// height offset
				float hw = linewidth * 0.5;
				worldPos.xyz += position.x < 0.0 ? hw * worldUp : - hw * worldUp;

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// cap extension
					worldPos.xyz += position.y < 0.5 ? - hw * worldDir : hw * worldDir;

					// add width to the box
					worldPos.xyz += worldFwd * hw;

					// endcaps
					if ( position.y > 1.0 || position.y < 0.0 ) {

						worldPos.xyz -= worldFwd * 2.0 * hw;

					}

				#endif

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			float alpha = opacity;
			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};class Ve extends di{constructor(e){super({type:"LineMaterial",uniforms:St.clone(ue.line.uniforms),vertexShader:ue.line.vertexShader,fragmentShader:ue.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,this.setValues(e)}get color(){return this.uniforms.diffuse.value}set color(e){this.uniforms.diffuse.value=e}get worldUnits(){return"WORLD_UNITS"in this.defines}set worldUnits(e){e===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}get linewidth(){return this.uniforms.linewidth.value}set linewidth(e){this.uniforms.linewidth&&(this.uniforms.linewidth.value=e)}get dashed(){return"USE_DASH"in this.defines}set dashed(e){e===!0!==this.dashed&&(this.needsUpdate=!0),e===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}get dashScale(){return this.uniforms.dashScale.value}set dashScale(e){this.uniforms.dashScale.value=e}get dashSize(){return this.uniforms.dashSize.value}set dashSize(e){this.uniforms.dashSize.value=e}get dashOffset(){return this.uniforms.dashOffset.value}set dashOffset(e){this.uniforms.dashOffset.value=e}get gapSize(){return this.uniforms.gapSize.value}set gapSize(e){this.uniforms.gapSize.value=e}get opacity(){return this.uniforms.opacity.value}set opacity(e){this.uniforms&&(this.uniforms.opacity.value=e)}get resolution(){return this.uniforms.resolution.value}set resolution(e){this.uniforms.resolution.value.copy(e)}get alphaToCoverage(){return"USE_ALPHA_TO_COVERAGE"in this.defines}set alphaToCoverage(e){this.defines&&(e===!0!==this.alphaToCoverage&&(this.needsUpdate=!0),e===!0?this.defines.USE_ALPHA_TO_COVERAGE="":delete this.defines.USE_ALPHA_TO_COVERAGE)}}const it=new Pe,ce=new x;class Et extends ui{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],a=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(a),this.setAttribute("position",new Ze(e,3)),this.setAttribute("uv",new Ze(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,a=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),a.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const a=new De(t,6,1);return this.setAttribute("instanceStart",new W(a,3,0)),this.setAttribute("instanceEnd",new W(a,3,3)),this.instanceCount=this.attributes.instanceStart.count,this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const a=new De(t,6,1);return this.setAttribute("instanceColorStart",new W(a,3,0)),this.setAttribute("instanceColorEnd",new W(a,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new gi(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Pe);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),it.setFromBufferAttribute(t),this.boundingBox.union(it))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ge),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const a=this.boundingSphere.center;this.boundingBox.getCenter(a);let n=0;for(let r=0,o=e.count;r<o;r++)ce.fromBufferAttribute(e,r),n=Math.max(n,a.distanceToSquared(ce)),ce.fromBufferAttribute(t,r),n=Math.max(n,a.distanceToSquared(ce));this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}}class Oe extends Et{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,a=new Float32Array(2*t);for(let n=0;n<t;n+=3)a[2*n]=e[n],a[2*n+1]=e[n+1],a[2*n+2]=e[n+2],a[2*n+3]=e[n+3],a[2*n+4]=e[n+4],a[2*n+5]=e[n+5];return super.setPositions(a),this}setColors(e){const t=e.length-3,a=new Float32Array(2*t);for(let n=0;n<t;n+=3)a[2*n]=e[n],a[2*n+1]=e[n+1],a[2*n+2]=e[n+2],a[2*n+3]=e[n+3],a[2*n+4]=e[n+4],a[2*n+5]=e[n+5];return super.setColors(a),this}setFromPoints(e){const t=e.length-1,a=new Float32Array(6*t);for(let n=0;n<t;n++)a[6*n]=e[n].x,a[6*n+1]=e[n].y,a[6*n+2]=e[n].z||0,a[6*n+3]=e[n+1].x,a[6*n+4]=e[n+1].y,a[6*n+5]=e[n+1].z||0;return super.setPositions(a),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}const Se=new se,nt=new x,at=new x,M=new se,S=new se,C=new se,Be=new x,xe=new ae,B=new Ti,rt=new x,le=new Pe,me=new Ge,_=new se;let H,q;function ot(i,e,t){return _.set(0,0,-e,1).applyMatrix4(i.projectionMatrix),_.multiplyScalar(1/_.w),_.x=q/t.width,_.y=q/t.height,_.applyMatrix4(i.projectionMatrixInverse),_.multiplyScalar(1/_.w),Math.abs(Math.max(_.x,_.y))}function rn(i,e){const t=i.matrixWorld,a=i.geometry,n=a.attributes.instanceStart,r=a.attributes.instanceEnd,o=Math.min(a.instanceCount,n.count);for(let s=0,c=o;s<c;s++){B.start.fromBufferAttribute(n,s),B.end.fromBufferAttribute(r,s),B.applyMatrix4(t);const l=new x,m=new x;H.distanceSqToSegment(B.start,B.end,m,l),m.distanceTo(l)<q*.5&&e.push({point:m,pointOnLine:l,distance:H.origin.distanceTo(m),object:i,face:null,faceIndex:s,uv:null,uv1:null})}}function on(i,e,t){const a=e.projectionMatrix,r=i.material.resolution,o=i.matrixWorld,s=i.geometry,c=s.attributes.instanceStart,l=s.attributes.instanceEnd,m=Math.min(s.instanceCount,c.count),d=-e.near;H.at(1,C),C.w=1,C.applyMatrix4(e.matrixWorldInverse),C.applyMatrix4(a),C.multiplyScalar(1/C.w),C.x*=r.x/2,C.y*=r.y/2,C.z=0,Be.copy(C),xe.multiplyMatrices(e.matrixWorldInverse,o);for(let u=0,g=m;u<g;u++){if(M.fromBufferAttribute(c,u),S.fromBufferAttribute(l,u),M.w=1,S.w=1,M.applyMatrix4(xe),S.applyMatrix4(xe),M.z>d&&S.z>d)continue;if(M.z>d){const R=M.z-S.z,h=(M.z-d)/R;M.lerp(S,h)}else if(S.z>d){const R=S.z-M.z,h=(S.z-d)/R;S.lerp(M,h)}M.applyMatrix4(a),S.applyMatrix4(a),M.multiplyScalar(1/M.w),S.multiplyScalar(1/S.w),M.x*=r.x/2,M.y*=r.y/2,S.x*=r.x/2,S.y*=r.y/2,B.start.copy(M),B.start.z=0,B.end.copy(S),B.end.z=0;const v=B.closestPointToPointParameter(Be,!0);B.at(v,rt);const T=yt.lerp(M.z,S.z,v),f=T>=-1&&T<=1,I=Be.distanceTo(rt)<q*.5;if(f&&I){B.start.fromBufferAttribute(c,u),B.end.fromBufferAttribute(l,u),B.start.applyMatrix4(o),B.end.applyMatrix4(o);const R=new x,h=new x;H.distanceSqToSegment(B.start,B.end,h,R),t.push({point:h,pointOnLine:R,distance:H.origin.distanceTo(h),object:i,face:null,faceIndex:u,uv:null,uv1:null})}}}class sn extends oe{constructor(e=new Et,t=new Ve({color:Math.random()*16777215})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,a=e.attributes.instanceEnd,n=new Float32Array(2*t.count);for(let o=0,s=0,c=t.count;o<c;o++,s+=2)nt.fromBufferAttribute(t,o),at.fromBufferAttribute(a,o),n[s]=s===0?0:n[s-1],n[s+1]=n[s]+nt.distanceTo(at);const r=new De(n,2,1);return e.setAttribute("instanceDistanceStart",new W(r,1,0)),e.setAttribute("instanceDistanceEnd",new W(r,1,1)),this}raycast(e,t){const a=this.material.worldUnits,n=e.camera;n===null&&!a&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const r=e.params.Line2!==void 0&&e.params.Line2.threshold||0;H=e.ray;const o=this.matrixWorld,s=this.geometry,c=this.material;q=c.linewidth+r,s.boundingSphere===null&&s.computeBoundingSphere(),me.copy(s.boundingSphere).applyMatrix4(o);let l;if(a)l=q*.5;else{const d=Math.max(n.near,me.distanceToPoint(H.origin));l=ot(n,d,c.resolution)}if(me.radius+=l,H.intersectsSphere(me)===!1)return;s.boundingBox===null&&s.computeBoundingBox(),le.copy(s.boundingBox).applyMatrix4(o);let m;if(a)m=q*.5;else{const d=Math.max(n.near,le.distanceToPoint(H.origin));m=ot(n,d,c.resolution)}le.expandByScalar(m),H.intersectsBox(le)!==!1&&(a?rn(this,t):on(this,n,t))}onBeforeRender(e){const t=this.material.uniforms;t&&t.resolution&&(e.getViewport(Se),this.material.uniforms.resolution.value.set(Se.z,Se.w))}}class st extends sn{constructor(e=new Oe,t=new Ve({color:Math.random()*16777215})){super(e,t),this.isLine2=!0,this.type="Line2"}}const N=[{name:"Regular-Joe",src:"artSrc/ship1.glb",desc:"Average balanced ship for most users.",data:{collisionSize:8,blasterDelay:1,maxSpeed:[2.4,1.35,4],speedAccel:[.4,.3,.5],speedDecel:[.92,.92,.91],rollDelay:15,rollCost:15,boostCost:2,hpMax:200,hp:200,hpDisplayed:150,energyMax:100,energy:50,energyDisplayed:50,energyDelay:60,energyRecharge:10},blaster:{soundSrc:"soundSrc/pcBlastJoe.mp3",speed:9,power:1,shape:"sphere",color:"blue",size:3}},{name:"Bubbles",src:"artSrc/ship2.glb",desc:"Easily pops enemies. Slow but sturdy and easy to hit enemies.",data:{collisionSize:9,blasterDelay:3,maxSpeed:[1.8,1.1,3],speedAccel:[.3,.2,.4],speedDecel:[.93,.93,.92],rollDelay:25,rollCost:20,boostCost:4,hpMax:300,hp:300,hpDisplayed:300,energyMax:200,energy:50,energyDisplayed:50,energyDelay:60,energyRecharge:10},blaster:{soundSrc:"soundSrc/pcBlastBubble.mp3",speed:7,power:2,shape:"sphere",color:"bubbleGum",size:5}},{name:"Sparrow",src:"artSrc/ship3.glb",desc:"Hard to handle, but swift and powerful.",data:{collisionSize:7,blasterDelay:4,maxSpeed:[3,1.8,5],speedAccel:[.6,.4,.6],speedDecel:[.91,.91,.9],rollDelay:5,rollCost:5,boostCost:2,hpMax:100,hp:100,hpDisplayed:100,energyMax:75,energy:50,energyDisplayed:50,energyDelay:15,energyRecharge:5},blaster:{soundSrc:"soundSrc/pcBlastSparrow.mp3",speed:10,power:5,shape:"capsule",color:"orange",size:1.3}}],cn="soundSrc/select.mp3",ln="soundSrc/confirm.mp3",mn="soundSrc/adjust.mp3";function y(i,e=.3){let t=i;i=="select"&&(t=cn),i=="confirm"&&(t=ln),i=="adjust"&&(t=mn);const a=new Audio(t);a.volume=e,a.play()}const dn=.2;function Qt(i=0){const e=new wt,t=new $,a=un();return e.load(N[i].src,n=>t.add(n.scene)),t.add(a),Ct(t,i),t}function Ct(i,e=0){const t=N[e].data;i.position.set(0,0,0),i.rotation.set(0,0,0),i.blasterCoolTime=0,i.rollCoolTime=0,i.energyCoolTime=0,i.speed=[0,0,0],i.rolling=!1,i.visible=!0,i.collisionSize=t.collisionSize,i.blasterDelay=t.blasterDelay,i.maxSpeed=t.maxSpeed,i.speedAccel=t.speedAccel,i.speedDecel=t.speedDecel,i.rollDelay=t.rollDelay,i.rollCost=t.rollCost,i.boostCost=t.boostCost,i.hpMax=t.hpMax,i.hp=t.hp,i.hpDisplayed=t.hpDisplayed,i.energyMax=t.energyMax,i.energy=t.energy,i.energyDisplayed=t.energyDisplayed,i.energyDelay=t.energyDelay,i.energyRecharge=t.energyRecharge,i.shipNumber=e}function un(){const i=new Oe;i.setPositions([2.8,-2.4,0,-2.8,-2.4,0,0,2,0,2.8,-2.4,0]);const e=new Oe;e.setPositions([1.4,-1.2,50,-1.4,-1.2,50,0,1,50,1.47,-1.2,50]);const t=new Ve({color:4390656,opacity:.6,linewidth:5,depthTest:!1,transparent:!0,resolution:new ve(window.innerWidth,window.innerHeight)}),a=new $;return a.add(new st(i,t)),a.add(new st(e,t)),a.position.set(0,0,120),a}function gn(i){y(N[i.shipNumber].blaster.soundSrc,dn);const e=N[i.shipNumber].blaster;let t,a,n;e.shape=="sphere"?(t=new Bt(e.size,5,5),n=e.size/2+1):e.shape=="capsule"&&(t=new xt(e.size,27,2,8),t.rotateX(Math.PI/2),n=15),e.color=="blue"&&(a=65535),e.color=="green"&&(a=65280),e.color=="orange"&&(a=16750848),e.color=="violet"&&(a=12255487),e.color=="bubbleGum"&&(a=16711809);const r=new K({color:a,transparent:!0,opacity:.8,blending:Ke}),o=new oe(t,r);return o.position.copy(i.position),o.rotation.copy(i.rotation),o.collisionSize=n,o.power=e.power,o.speed=[0,0,0],o.speed[0]=i.speed[0],o.speed[1]=i.speed[1],o.speed[2]=Math.sqrt(Math.pow(e.speed,2)-Math.pow(o.speed[0],2)-Math.pow(o.speed[1],2)),o}const Tn=function(){return{right:!1,left:!1,up:!1,down:!1,rightRoll:!1,leftRoll:!1,boost:!1,blaster:!1,enter:!1,esc:!1,upDownKey:"inverted",pressed:!1}},fn=function(i,e){let t="KeyW",a="ArrowUp",n="KeyS",r="ArrowDown";return i.upDownKey=="unInverted"&&(t="KeyS",a="ArrowDown",n="KeyW",r="ArrowUp"),i.pressed=!0,e.code=="KeyD"?(i.right=!0,i):e.code=="KeyA"?(i.left=!0,i):e.code==t?(i.up=!0,i):e.code==n?(i.down=!0,i):e.code=="ArrowRight"?(i.right=!0,i):e.code=="ArrowLeft"?(i.left=!0,i):e.code==a?(i.up=!0,i):e.code==r?(i.down=!0,i):e.code=="KeyV"||e.code=="KeyE"||e.code=="KeyM"?(i.rightRoll=!0,i):e.code=="KeyC"||e.code=="KeyQ"||e.code=="KeyN"?(i.leftRoll=!0,i):e.code=="KeyX"||e.code=="Comma"?(i.boost=!0,i):e.code=="Space"?(i.blaster=!0,i):e.code=="Enter"?(i.enter=!0,i):(e.code=="Escape"&&(i.esc=!0),i)},pn=function(i,e,t){let a="KeyW",n="ArrowUp",r="KeyS",o="ArrowDown";return i.upDownKey=="unInverted"&&(a="KeyS",n="ArrowDown",r="KeyW",o="ArrowUp"),i.pressed=!0,e.code=="KeyD"?(i.right=!1,i):e.code=="KeyA"?(i.left=!1,i):e.code==a?(i.up=!1,i):e.code==r?(i.down=!1,i):e.code=="ArrowRight"?(i.right=!1,i):e.code=="ArrowLeft"?(i.left=!1,i):e.code==n?(i.up=!1,i):e.code==o?(i.down=!1,i):e.code=="KeyV"||e.code=="KeyE"||e.code=="KeyM"?(i.rightRoll=!1,i):e.code=="KeyC"||e.code=="KeyQ"||e.code=="KeyN"?(i.leftRoll=!1,i):e.code=="KeyX"||e.code=="Comma"?(i.boost=!1,i):e.code=="Space"?(i.blaster=!1,i):e.code=="Enter"?(i.enter=!1,i):(e.code=="Escape"&&(i.esc=!1),i)};function E(i,e){e.traverse(t=>{t.isMesh&&(t.geometry.dispose(),Array.isArray(t.material)?t.material.forEach(a=>a.dispose()):t.material.dispose())}),i.remove(e)}function ze(i,e){const t=i.getObjectByProperty("uuid",e);t&&(t.material.map&&t.material.map.dispose(),E(i,t))}const hn=[["artSrc/back.png",{size:[800,800],position:[0,0,1e3],rotationY:Math.PI,speed:0}],["artSrc/back.png",{size:[1e3,800],position:[-600,0,400],rotationY:Math.PI/4,speed:0}],["artSrc/back.png",{size:[1e3,800],position:[-700,0,-500],rotationY:Math.PI/2,speed:0}],["artSrc/back.png",{size:[1e3,800],position:[-300,-100,-1e3],rotationY:0,speed:0}],["artSrc/planet1.png",{size:[60,60],position:[120,-100,700],rotationY:Math.PI,speed:.06}],["artSrc/planet2.png",{size:[140,140],position:[150,50,800],rotationY:Math.PI,speed:.09}]];function vn(i){hn.map(t=>t).forEach(t=>{Pn(i,i.backgroundObjs,...t)})}function Pn(i,e,t,{size:[a,n],position:[r,o,s],rotationY:c,speed:l}){const m=new fi(a,n),u=new he().load(t,function(){const g=new K({map:u,side:At,transparent:!0}),p=new oe(m,g);p.position.set(r,o,s),p.lookAt(0,0,0),p.rotation.y=c,p.speed=l,i.add(p),e.push(p)},void 0,function(g){console.error("Background load failed",g)})}const Rn=[{eventTime:10,npcAIname:"asteroidAI",npcBasic:"asteroid1Basic",startingPosition:"random"},{eventTime:20,npcAIname:"asteroidAI",npcBasic:"asteroid2Basic",startingPosition:"random"},{eventTime:20,npcAIname:"asteroidAI",npcBasic:"asteroid2Basic",startingPosition:"random"},{eventTime:15,npcAIname:"asteroidAI",npcBasic:"asteroid2Basic",startingPosition:"random"},{eventTime:20,npcAIname:"asteroidAI",npcBasic:"asteroid2Basic",startingPosition:"random"},{eventTime:15,npcAIname:"asteroidAI",npcBasic:"asteroid2Basic",startingPosition:"random"},{eventTime:15,npcAIname:"asteroidAI",npcBasic:"asteroid2Basic",startingPosition:"random"},{eventTime:20,npcAIname:"asteroidAI",npcBasic:"asteroid2Basic",startingPosition:"random"},{eventTime:20,npcAIname:"asteroidAI",npcBasic:"asteroid2Basic",startingPosition:"random"},{eventTime:13,npcAIname:"asteroidAI",npcBasic:"asteroid2Basic",startingPosition:"random"},{eventTime:15,npcAIname:"asteroidAI",npcBasic:"asteroid2Basic",startingPosition:"random"},{eventTime:15,npcAIname:"asteroidAI",npcBasic:"asteroid2Basic",startingPosition:"random"},{eventTime:20,npcAIname:"asteroidAI",npcBasic:"asteroid2Basic",startingPosition:"random"},{eventTime:15,npcAIname:"asteroidAI",npcBasic:"asteroid2Basic",startingPosition:"random"},{eventTime:30,npcAIname:"droneAIrandom",npcBasic:"droneBasic",startingPosition:[5,15,700]},{eventTime:60,npcAIname:"droneAIrandom",npcBasic:"droneBasic",startingPosition:[25,-10,700]},{eventTime:10,npcAIname:"droneAIrandom",npcBasic:"droneBasic",startingPosition:[-20,10,700]},{eventTime:10,npcAIname:"bomberAIstatic",npcBasic:"bomberBasic",startingPosition:[33,12,700]},{eventTime:40,npcAIname:"droneAIrandom",npcBasic:"droneBasic",startingPosition:[0,0,700]},{eventTime:50,npcAIname:"droneAIrandom",npcBasic:"droneBasic",startingPosition:[20,10,700]},{eventTime:50,npcAIname:"droneAIrandom",npcBasic:"droneBasic",startingPosition:[20,10,700]},{eventTime:50,npcAIname:"fighterAIrandom",npcBasic:"fighterBasic",startingPosition:[-10,-10,700]},{eventTime:10,npcAIname:"droneAIrandom",npcBasic:"droneBasic",startingPosition:[25,10,700]},{eventTime:10,npcAIname:"droneAIrandom",npcBasic:"droneBasic",startingPosition:[-25,10,700]},{eventTime:170,npcAIname:"fighterAIrandom",npcBasic:"fighterBasic",startingPosition:[-10,-10,700]},{eventTime:60,npcAIname:"droneAIrandom",npcBasic:"droneBasic",startingPosition:[25,-10,700]},{eventTime:10,npcAIname:"droneAIrandom",npcBasic:"droneBasic",startingPosition:[-25,-10,700]},{eventTime:10,npcAIname:"bomberAIstatic",npcBasic:"bomberBasic",startingPosition:[30,15,700]},{eventTime:10,npcAIname:"bomberAIstatic",npcBasic:"bomberBasic",startingPosition:[-30,15,700]},{eventTime:130,npcAIname:"fighterAIrandom",npcBasic:"fighterBasic",startingPosition:[-15,-10,700]},{eventTime:10,npcAIname:"fighterAIrandom",npcBasic:"fighterBasic",startingPosition:[15,-10,700]},{eventTime:80,npcAIname:"droneAIrandom",npcBasic:"droneBasic",startingPosition:[15,5,700]},{eventTime:10,npcAIname:"droneAIrandom",npcBasic:"droneBasic",startingPosition:[-15,5,700]},{eventTime:180,npcAIname:"destroyerAIrandomC",npcBasic:"destroyerStrongerBasic",startingPosition:[0,-10,700]},{eventTime:100,npcAIname:"droneAIrandom1QRC",npcBasic:"droneBasic",startingPosition:[30,15,700]},{eventTime:10,npcAIname:"droneAIrandom2QRC",npcBasic:"droneBasic",startingPosition:[-30,15,700]},{eventTime:10,npcAIname:"droneAIrandom3QRC",npcBasic:"droneBasic",startingPosition:[30,-15,700]},{eventTime:10,npcAIname:"droneAIrandom4QRC",npcBasic:"droneBasic",startingPosition:[-30,-15,700]},{eventTime:150,npcAIname:"bomberAIstatic",npcBasic:"bomberBasic",startingPosition:[30,15,700]},{eventTime:10,npcAIname:"bomberAIstatic",npcBasic:"bomberBasic",startingPosition:[-30,15,700]},{eventTime:150,npcAIname:"droneAIrandom1HF",npcBasic:"droneBasic",startingPosition:[20,10,700]},{eventTime:10,npcAIname:"droneAIrandom2HF",npcBasic:"droneBasic",startingPosition:[-20,10,700]},{eventTime:10,npcAIname:"droneAIrandom1HR",npcBasic:"droneBasic",startingPosition:[20,-10,700]},{eventTime:10,npcAIname:"droneAIrandom2HR",npcBasic:"droneBasic",startingPosition:[-20,-10,700]},{eventTime:120,npcAIname:"fighterAIrandom1HF",npcBasic:"fighterBasic",startingPosition:[30,-15,700]},{eventTime:10,npcAIname:"fighterAIrandom2HF",npcBasic:"fighterBasic",startingPosition:[-30,-15,700]},{eventTime:50,npcAIname:"bomberAIstatic",npcBasic:"bomberBasic",startingPosition:[30,15,700]},{eventTime:10,npcAIname:"bomberAIstatic",npcBasic:"bomberBasic",startingPosition:[-30,15,700]},{eventTime:120,npcAIname:"destroyerAIrandom2HR",npcBasic:"destroyerBasic",startingPosition:[30,5,700]},{eventTime:10,npcAIname:"destroyerAIrandom2HR",npcBasic:"destroyerBasic",startingPosition:[-30,5,700]},{eventTime:120,npcAIname:"droneAIrandom1Q",npcBasic:"droneBasic",startingPosition:[25,15,700]},{eventTime:15,npcAIname:"droneAIrandom2Q",npcBasic:"droneBasic",startingPosition:[-25,15,700]},{eventTime:360,npcAIname:"cruiserBossAIstaticC",npcBasic:"cruiserBossBasic",startingPosition:[0,5,700]},{eventTime:100,npcAIname:"droneAIrandom8hQFRSC",npcBasic:"droneBasic",startingPosition:[10,0,630]},{eventTime:25,npcAIname:"droneAIrandom5hQFLSC",npcBasic:"droneBasic",startingPosition:[-10,0,605]},{eventTime:25,npcAIname:"droneAIrandom3hQFRSC",npcBasic:"droneBasic",startingPosition:[10,0,580]},{eventTime:25,npcAIname:"droneAIrandom2hQFLSC",npcBasic:"droneBasic",startingPosition:[-10,0,555]},{eventTime:25,npcAIname:"droneAIrandom6hQFRSC",npcBasic:"droneBasic",startingPosition:[10,0,530]},{eventTime:25,npcAIname:"droneAIrandom7hQFLSC",npcBasic:"droneBasic",startingPosition:[-10,0,505]},{eventTime:25,npcAIname:"droneAIrandom1hQFRSC",npcBasic:"droneBasic",startingPosition:[10,0,480]},{eventTime:25,npcAIname:"droneAIrandom4hQFLSC",npcBasic:"droneBasic",startingPosition:[-10,0,455]},{eventTime:100,npcAIname:"droneAIrandom8hQFRSC",npcBasic:"droneBasic",startingPosition:[10,0,300]},{eventTime:25,npcAIname:"droneAIrandom5hQFLSC",npcBasic:"droneBasic",startingPosition:[-10,0,300]},{eventTime:25,npcAIname:"droneAIrandom3hQFRSC",npcBasic:"droneBasic",startingPosition:[10,0,300]},{eventTime:25,npcAIname:"droneAIrandom2hQFLSC",npcBasic:"droneBasic",startingPosition:[-10,0,300]},{eventTime:25,npcAIname:"droneAIrandom6hQFRSC",npcBasic:"droneBasic",startingPosition:[10,0,300]},{eventTime:25,npcAIname:"droneAIrandom7hQFLSC",npcBasic:"droneBasic",startingPosition:[-10,0,300]},{eventTime:25,npcAIname:"droneAIrandom1hQFRSC",npcBasic:"droneBasic",startingPosition:[10,0,300]},{eventTime:25,npcAIname:"droneAIrandom4hQFLSC",npcBasic:"droneBasic",startingPosition:[-10,0,300]},{eventTime:910,npcAIname:"asteroidAI",npcBasic:"asteroid1Basic",startingPosition:"random"},{eventTime:13,npcAIname:"asteroidAI",npcBasic:"asteroid2Basic",startingPosition:"random"},{eventTime:13,npcAIname:"asteroidAI",npcBasic:"asteroid1Basic",startingPosition:"random"},{eventTime:13,npcAIname:"asteroidAI",npcBasic:"asteroid1Basic",startingPosition:"random"},{eventTime:13,npcAIname:"asteroidAI",npcBasic:"asteroid2Basic",startingPosition:"random"},{eventTime:13,npcAIname:"asteroidAI",npcBasic:"asteroid1Basic",startingPosition:"random"},{eventTime:13,npcAIname:"asteroidAI",npcBasic:"asteroid2Basic",startingPosition:"random"},{eventTime:13,npcAIname:"asteroidAI",npcBasic:"asteroid1Basic",startingPosition:"random"},{eventTime:13,npcAIname:"asteroidAI",npcBasic:"asteroid2Basic",startingPosition:"random"},{eventTime:13,npcAIname:"asteroidAI",npcBasic:"asteroid1Basic",startingPosition:"random"},{eventTime:13,npcAIname:"asteroidAI",npcBasic:"asteroid1Basic",startingPosition:"random"},{eventTime:13,npcAIname:"asteroidAI",npcBasic:"asteroid2Basic",startingPosition:"random"},{eventTime:13,npcAIname:"asteroidAI",npcBasic:"asteroid2Basic",startingPosition:"random"},{eventTime:13,npcAIname:"asteroidAI",npcBasic:"asteroid1Basic",startingPosition:"random"},{eventTime:13,npcAIname:"asteroidAI",npcBasic:"asteroid2Basic",startingPosition:"random"},{eventTime:10,npcAIname:"destroyerAIrandom1HFC",npcBasic:"destroyerBasic",startingPosition:[30,-10,700]},{eventTime:10,npcAIname:"destroyerAIrandom2HFC",npcBasic:"destroyerBasic",startingPosition:[-30,-10,700]},{eventTime:50,npcAIname:"droneAIrandom1QR",npcBasic:"droneBasic",startingPosition:[20,10,700]},{eventTime:50,npcAIname:"droneAIrandom2QR",npcBasic:"droneBasic",startingPosition:[-20,10,700]},{eventTime:50,npcAIname:"droneAIrandom3QR",npcBasic:"droneBasic",startingPosition:[20,-10,700]},{eventTime:50,npcAIname:"droneAIrandom4QR",npcBasic:"droneBasic",startingPosition:[-20,-10,700]},{eventTime:70,npcAIname:"cruiserAIstaticC",npcBasic:"cruiserBasic",startingPosition:[50,-20,700]},{eventTime:10,npcAIname:"cruiserAIstaticC",npcBasic:"cruiserBasic",startingPosition:[-50,-20,700]},{eventTime:100,npcAIname:"droneAIrandom1hQF",npcBasic:"droneBasic",startingPosition:[40,20,700]},{eventTime:15,npcAIname:"droneAIrandom2hQF",npcBasic:"droneBasic",startingPosition:[40,7,700]},{eventTime:15,npcAIname:"droneAIrandom3hQF",npcBasic:"droneBasic",startingPosition:[-40,20,700]},{eventTime:15,npcAIname:"droneAIrandom4hQF",npcBasic:"droneBasic",startingPosition:[-40,7,700]},{eventTime:15,npcAIname:"droneAIrandom1hQR",npcBasic:"droneBasic",startingPosition:[40,20,700]},{eventTime:15,npcAIname:"droneAIrandom2hQR",npcBasic:"droneBasic",startingPosition:[40,7,700]},{eventTime:15,npcAIname:"droneAIrandom3hQR",npcBasic:"droneBasic",startingPosition:[-40,20,700]},{eventTime:15,npcAIname:"droneAIrandom4hQR",npcBasic:"droneBasic",startingPosition:[-40,7,700]},{eventTime:320,npcAIname:"droneAIrandom1hQR",npcBasic:"droneBasic",startingPosition:[30,10,700]},{eventTime:15,npcAIname:"droneAIrandom2hQR",npcBasic:"droneBasic",startingPosition:[10,10,700]},{eventTime:15,npcAIname:"droneAIrandom3hQR",npcBasic:"droneBasic",startingPosition:[-10,10,700]},{eventTime:15,npcAIname:"droneAIrandom4hQR",npcBasic:"droneBasic",startingPosition:[-30,10,700]},{eventTime:15,npcAIname:"droneAIrandom5hQR",npcBasic:"droneBasic",startingPosition:[30,-10,700]},{eventTime:15,npcAIname:"droneAIrandom6hQR",npcBasic:"droneBasic",startingPosition:[10,-10,700]},{eventTime:15,npcAIname:"droneAIrandom7hQR",npcBasic:"droneBasic",startingPosition:[-10,-10,700]},{eventTime:15,npcAIname:"droneAIrandom8hQR",npcBasic:"droneBasic",startingPosition:[-30,-10,700]},{eventTime:120,npcAIname:"destroyerAIrandom3QFC",npcBasic:"destroyerBasic",startingPosition:[30,-10,700]},{eventTime:10,npcAIname:"destroyerAIrandom4QFC",npcBasic:"destroyerBasic",startingPosition:[-30,-10,700]},{eventTime:150,npcAIname:"fighterAIrandom1QR",npcBasic:"fighterBasic",startingPosition:[30,15,700]},{eventTime:10,npcAIname:"fighterAIrandom2QR",npcBasic:"fighterBasic",startingPosition:[-30,15,700]},{eventTime:10,npcAIname:"cruiserAIstaticCarrier",npcBasic:"carrierBasic",startingPosition:[-105,0,700]},{eventTime:10,npcAIname:"destroyerAIrandom2HR",npcBasic:"destroyerBasic",startingPosition:[-10,15,700]},{eventTime:90,npcAIname:"droneAIrandom8hQFRS",npcBasic:"droneBasic",startingPosition:[-105,-5,650]},{eventTime:10,npcAIname:"fighterAIrandom1HR",npcBasic:"fighterBasic",startingPosition:[5,5,700]},{eventTime:40,npcAIname:"droneAIrandom3hQFRS",npcBasic:"droneBasic",startingPosition:[-105,-5,600]},{eventTime:50,npcAIname:"droneAIrandom6hQFRS",npcBasic:"droneBasic",startingPosition:[-105,-5,550]},{eventTime:50,npcAIname:"droneAIrandom1hQFRS",npcBasic:"droneBasic",startingPosition:[-105,-5,500]},{eventTime:10,npcAIname:"fighterAIrandom2Q",npcBasic:"fighterBasic",startingPosition:[-30,15,700]},{eventTime:10,npcAIname:"fighterAIrandom4Q",npcBasic:"fighterBasic",startingPosition:[-30,-15,700]},{eventTime:30,npcAIname:"droneAIrandom4hQFRS",npcBasic:"droneBasic",startingPosition:[-105,-5,450]},{eventTime:50,npcAIname:"droneAIrandom7hQFRS",npcBasic:"droneBasic",startingPosition:[-105,-5,400]},{eventTime:50,npcAIname:"droneAIrandom2hQFRS",npcBasic:"droneBasic",startingPosition:[-105,-5,350]},{eventTime:50,npcAIname:"droneAIrandom5hQFRS",npcBasic:"droneBasic",startingPosition:[-105,-5,300]},{eventTime:10,npcAIname:"cruiserAIstaticCarrier",npcBasic:"carrierBasic",startingPosition:[105,0,700]},{eventTime:10,npcAIname:"destroyerAIrandom2HR",npcBasic:"destroyerBasic",startingPosition:[-10,15,700]},{eventTime:90,npcAIname:"droneAIrandom8hQFLS",npcBasic:"droneBasic",startingPosition:[105,-5,650]},{eventTime:10,npcAIname:"fighterAIrandom1HR",npcBasic:"fighterBasic",startingPosition:[5,5,700]},{eventTime:40,npcAIname:"droneAIrandom3hQFLS",npcBasic:"droneBasic",startingPosition:[105,-5,600]},{eventTime:50,npcAIname:"droneAIrandom6hQFLS",npcBasic:"droneBasic",startingPosition:[105,-5,550]},{eventTime:50,npcAIname:"droneAIrandom1hQFLS",npcBasic:"droneBasic",startingPosition:[105,-5,500]},{eventTime:10,npcAIname:"fighterAIrandom2Q",npcBasic:"fighterBasic",startingPosition:[-30,15,700]},{eventTime:10,npcAIname:"fighterAIrandom4Q",npcBasic:"fighterBasic",startingPosition:[-30,-15,700]},{eventTime:30,npcAIname:"droneAIrandom4hQFLS",npcBasic:"droneBasic",startingPosition:[105,-5,450]},{eventTime:50,npcAIname:"droneAIrandom7hQFLS",npcBasic:"droneBasic",startingPosition:[105,-5,400]},{eventTime:50,npcAIname:"droneAIrandom2hQFLS",npcBasic:"droneBasic",startingPosition:[105,-5,350]},{eventTime:50,npcAIname:"droneAIrandom5hQFLS",npcBasic:"droneBasic",startingPosition:[105,-5,300]},{eventTime:150,npcAIname:"bomberAIstatic",npcBasic:"bomberBasic",startingPosition:[35,15,700]},{eventTime:30,npcAIname:"bomberAIstatic",npcBasic:"bomberBasic",startingPosition:[-35,15,700]},{eventTime:30,npcAIname:"bomberAIstatic",npcBasic:"bomberBasic",startingPosition:[35,-15,700]},{eventTime:30,npcAIname:"bomberAIstatic",npcBasic:"bomberBasic",startingPosition:[-35,-15,700]},{eventTime:200,npcAIname:"droneAIrandom1hQ",npcBasic:"droneBasic",startingPosition:[20,10,700]},{eventTime:30,npcAIname:"droneAIrandom2hQ",npcBasic:"droneBasic",startingPosition:[40,10,700]},{eventTime:30,npcAIname:"droneAIrandom3hQ",npcBasic:"droneBasic",startingPosition:[-20,10,700]},{eventTime:30,npcAIname:"droneAIrandom4hQ",npcBasic:"droneBasic",startingPosition:[-40,10,700]},{eventTime:30,npcAIname:"droneAIrandom5hQ",npcBasic:"droneBasic",startingPosition:[20,-10,700]},{eventTime:30,npcAIname:"droneAIrandom6hQ",npcBasic:"droneBasic",startingPosition:[40,-10,700]},{eventTime:30,npcAIname:"droneAIrandom7hQ",npcBasic:"droneBasic",startingPosition:[-20,-10,700]},{eventTime:30,npcAIname:"droneAIrandom8hQ",npcBasic:"droneBasic",startingPosition:[-40,-10,700]},{eventTime:60,npcAIname:"fighterAIrandom1H",npcBasic:"fighterBasic",startingPosition:[30,0,700]},{eventTime:30,npcAIname:"destroyerAIrandom2H",npcBasic:"destroyerBasic",startingPosition:[-30,0,700]},{eventTime:100,npcAIname:"fighterAIrandom1H",npcBasic:"fighterBasic",startingPosition:[30,0,700]},{eventTime:30,npcAIname:"bomberAIstatic",npcBasic:"bomberBasic",startingPosition:[35,15,700]},{eventTime:15,npcAIname:"bomberAIstatic",npcBasic:"bomberBasic",startingPosition:[-35,15,700]},{eventTime:200,npcAIname:"destroyerAIrandom1HFC",npcBasic:"destroyerBasic",startingPosition:[20,5,700]},{eventTime:10,npcAIname:"destroyerAIrandom2HFC",npcBasic:"destroyerBasic",startingPosition:[-20,5,700]},{eventTime:100,npcAIname:"fighterAIrandom1QRC",npcBasic:"fighterBasic",startingPosition:[30,15,700]},{eventTime:30,npcAIname:"fighterAIrandom2QRC",npcBasic:"fighterBasic",startingPosition:[-30,15,700]},{eventTime:30,npcAIname:"fighterAIrandom3QRC",npcBasic:"fighterBasic",startingPosition:[30,-10,700]},{eventTime:30,npcAIname:"fighterAIrandom4QRC",npcBasic:"fighterBasic",startingPosition:[-30,-10,700]},{eventTime:300,npcAIname:"asteroidAI",npcBasic:"asteroid1FastBasic",startingPosition:"random"},{eventTime:10,npcAIname:"asteroidAI",npcBasic:"asteroid2FastBasic",startingPosition:"random"},{eventTime:10,npcAIname:"asteroidAI",npcBasic:"asteroid1FastBasic",startingPosition:"random"},{eventTime:10,npcAIname:"asteroidAI",npcBasic:"asteroid1FastBasic",startingPosition:"random"},{eventTime:10,npcAIname:"asteroidAI",npcBasic:"asteroid2FastBasic",startingPosition:"random"},{eventTime:10,npcAIname:"asteroidAI",npcBasic:"asteroid1FastBasic",startingPosition:"random"},{eventTime:10,npcAIname:"asteroidAI",npcBasic:"asteroid2FastBasic",startingPosition:"random"},{eventTime:10,npcAIname:"asteroidAI",npcBasic:"asteroid1FastBasic",startingPosition:"random"},{eventTime:10,npcAIname:"asteroidAI",npcBasic:"asteroid2FastBasic",startingPosition:"random"},{eventTime:10,npcAIname:"asteroidAI",npcBasic:"asteroid1FastBasic",startingPosition:"random"},{eventTime:10,npcAIname:"asteroidAI",npcBasic:"asteroid1FastBasic",startingPosition:"random"},{eventTime:10,npcAIname:"asteroidAI",npcBasic:"asteroid2FastBasic",startingPosition:"random"},{eventTime:10,npcAIname:"asteroidAI",npcBasic:"asteroid2FastBasic",startingPosition:"random"},{eventTime:10,npcAIname:"asteroidAI",npcBasic:"asteroid1FastBasic",startingPosition:"random"},{eventTime:10,npcAIname:"asteroidAI",npcBasic:"asteroid2FastBasic",startingPosition:"random"},{eventTime:10,npcAIname:"asteroidAI",npcBasic:"asteroid1FastBasic",startingPosition:[3,15,700]},{eventTime:10,npcAIname:"asteroidAI",npcBasic:"asteroid2FastBasic",startingPosition:"random"},{eventTime:10,npcAIname:"asteroidAI",npcBasic:"asteroid2FastBasic",startingPosition:"random"},{eventTime:5,npcAIname:"asteroidAI",npcBasic:"asteroid1FastBasic",startingPosition:[-13,15,700]},{eventTime:5,npcAIname:"asteroidAI",npcBasic:"asteroid1FastBasic",startingPosition:[16,2,700]},{eventTime:5,npcAIname:"asteroidAI",npcBasic:"asteroid2FastBasic",startingPosition:[-17,9,700]},{eventTime:5,npcAIname:"asteroidAI",npcBasic:"asteroid2FastBasic",startingPosition:[9,12,700]},{eventTime:5,npcAIname:"asteroidAI",npcBasic:"asteroid1FastBasic",startingPosition:[-2,5,700]},{eventTime:10,npcAIname:"bossAI",npcBasic:"bossBasic",startingPosition:[0,0,700]},{eventTime:100,npcAIname:"droneAIrandom1hQF",npcBasic:"droneBasic",startingPosition:[40,20,700]},{eventTime:30,npcAIname:"droneAIrandom2hQF",npcBasic:"droneBasic",startingPosition:[40,7,700]},{eventTime:30,npcAIname:"droneAIrandom3hQF",npcBasic:"droneBasic",startingPosition:[-40,20,700]},{eventTime:30,npcAIname:"droneAIrandom4hQF",npcBasic:"droneBasic",startingPosition:[-40,7,700]},{eventTime:30,npcAIname:"droneAIrandom5hQF",npcBasic:"droneBasic",startingPosition:[40,-20,700]},{eventTime:30,npcAIname:"droneAIrandom6hQF",npcBasic:"droneBasic",startingPosition:[40,-7,700]},{eventTime:15,npcAIname:"droneAIrandom7hQF",npcBasic:"droneBasic",startingPosition:[-40,-20,700]},{eventTime:30,npcAIname:"droneAIrandom8hQF",npcBasic:"droneBasic",startingPosition:[-40,-7,700]},{eventTime:100,npcAIname:"fighterAIrandom1HF",npcBasic:"fighterBasic",startingPosition:[35,10,700]},{eventTime:100,npcAIname:"destroyerAIrandom3QF",npcBasic:"destroyerBasic",startingPosition:[35,-10,700]},{eventTime:100,npcAIname:"fighterAIrandom2QF",npcBasic:"fighterBasic",startingPosition:[-35,10,700]},{eventTime:100,npcAIname:"destroyerAIrandom4QF",npcBasic:"destroyerBasic",startingPosition:[-35,-10,700]},{eventTime:370,npcAIname:"droneAIrandom1hQF",npcBasic:"droneBasic",startingPosition:[40,20,700]},{eventTime:15,npcAIname:"droneAIrandom2hQF",npcBasic:"droneBasic",startingPosition:[40,7,700]},{eventTime:15,npcAIname:"droneAIrandom3hQF",npcBasic:"droneBasic",startingPosition:[-40,20,700]},{eventTime:15,npcAIname:"droneAIrandom4hQF",npcBasic:"droneBasic",startingPosition:[-40,7,700]},{eventTime:15,npcAIname:"droneAIrandom5hQF",npcBasic:"droneBasic",startingPosition:[40,-20,700]},{eventTime:15,npcAIname:"droneAIrandom6hQF",npcBasic:"droneBasic",startingPosition:[40,-7,700]},{eventTime:15,npcAIname:"droneAIrandom7hQF",npcBasic:"droneBasic",startingPosition:[-40,-20,700]},{eventTime:15,npcAIname:"droneAIrandom8hQF",npcBasic:"droneBasic",startingPosition:[-40,-7,700]},{eventTime:100,npcAIname:"destroyerAIrandom1HFC",npcBasic:"destroyerBasic",startingPosition:[35,10,700]},{eventTime:100,npcAIname:"destroyerAIrandom2HFC",npcBasic:"destroyerBasic",startingPosition:[-35,10,700]},{eventTime:100,npcAIname:"fighterAIrandom3QRC",npcBasic:"fighterBasic",startingPosition:[35,-10,700]},{eventTime:100,npcAIname:"fighterAIrandom4QRC",npcBasic:"fighterBasic",startingPosition:[-35,-10,700]}];function An(i){i.levelArr=Rn.map(e=>e)}function _t(i,e,t,a,n){i.backgroundObjs.length>0&&i.backgroundObjs.forEach(r=>ze(i,r.uuid)),e.pcBlasters.length>0&&e.pcBlasters.forEach(r=>E(i,r)),t.npcs.length>0&&t.npcs.forEach(r=>E(i,r)),t.npcBlasters.length>0&&t.npcBlasters.forEach(r=>E(i,r)),a.sprites.length>0&&a.sprites.forEach(r=>ze(i,r.uuid)),i.backgroundObjs=[],i.levelArr=void 0,i.gameState="titleScreen",i.timeStamp=0,i.boostSpeed=0,i.boostalbe=!0,Ue(i,e),vn(i),An(i),n.position.set(50,25,192),n.lookAt(0,0,0)}function Ue(i,e){E(i,e.pcShip),e.pcShip=void 0,e.pcShip=Qt(i.shipNumber),i.add(e.pcShip),Ct(e.pcShip,i.shipNumber)}const In=function(i){i.add(new pi(16777215,4473924,7));const e=new Qe(16777215,1),t=new Qe(16777215,1);e.position.set(30,10,100),t.position.set(-30,-10,100),i.add(e),i.add(t)},bn=function(i,e){const t=e.attributes.position.array,a=i.boostSpeed;for(let n=2;n<t.length+1;n+=3)t[n]<-700?(t[n-2]=Math.random()*150-75,t[n-1]=Math.random()*150-75,t[n]=1e3):t[n]-=20+a*12;e.attributes.position.needsUpdate=!0};function yn(i,e,t,a,n){i.addEventListener("keydown",r=>t=fn(t,r)),i.addEventListener("keyup",r=>t=pn(t,r)),i.addEventListener("resize",()=>ct(i,e,a,n),!1),ct(i,e,a,n)}function ct(i,e,t,a){let n=i.innerWidth,r=i.innerHeight;n>r*2.2&&(n=r*2.2),t.aspect=n/r,t.updateProjectionMatrix(),a.setSize(n,r),e.getElementById("gameUI").style.width=n+"px",e.getElementById("gameUI").style.height=r+"px"}function we(i,e){return i.position.distanceTo(e.position)<=i.collisionSize+e.collisionSize}function Fe(i,e){const t=new hi,a=new x,n=Mn(i);let r=!1;t.params.Mesh.threshold=.01;for(const o of n)if(t.set(o,a.subVectors(o,e.position).normalize()),t.far=i.collisionSize,t.intersectObject(e,!0).length>0){r=!0;break}return r?(e.hitMark<=0&&e.traverse(o=>o.isMesh?o.material.color.set(16711680):null),e.hitMark=15,!0):!1}function Mn(i){const e=[];let t=1;return(i.type=="npcHeavy"||i.type=="asteroid")&&(t=15),i.traverse(a=>{if(a.isMesh&&a.geometry){const n=a.geometry,r=a.matrixWorld,o=n.attributes.position;for(let s=0;s<o.count;s+=t){const c=new x;c.fromBufferAttribute(o,s),c.applyMatrix4(r),e.push(c)}}}),e}const Sn=["soundSrc/hitSound1.mp3","soundSrc/hitSound2.mp3"],Bn=["soundSrc/explosion1.mp3","soundSrc/explosion2.mp3","soundSrc/explosion3.mp3"],xn="artSrc/fire.png",wn=.1,Fn=.4;function J(i,e,t,{sprites:a,materials:n,velocities:r,lifetimes:o,rotations:s}){const c=new he().load(xn),l=a.length;let m=0;t=="hit"&&(y(Sn[Math.round(Math.random())],wn),m=7),t=="explode"&&(y(Bn[Math.floor(Math.random()*3)],Fn),m=40);for(let d=l;d<l+m;d++){const u=new vi({map:c,transparent:!0,blending:Ke,depthWrite:!1,vertexColors:!0,color:[1,2,.5],rotation:0}),g=new Pi(u);t=="hit"?(r[d]={x:Math.random()*.04-.02,y:Math.random()*.04-.02,z:Math.random()*.04-.02},o[d]=.5+Math.random()/2,s[d]=(Math.random()-.5)*8,n[d]=u,g.position.set(e.position.x,e.position.y,e.position.z-e.collisionSize)):t=="explode"&&(r[d]={x:Math.random()*.24-.12,y:Math.random()*.24-.12,z:Math.random()*.24-.12},o[d]=3+Math.random(),s[d]=(Math.random()-.5)*8,n[d]=u,g.position.set(e.position.x,e.position.y,e.position.z)),i.add(g),a.push(g)}}function Ln(i,e,t,a){const n=e.pcShip,r=e.pcBlasters,o=t.npcs,s=t.npcBlasters;let c=[],l=[];r.forEach(m=>{let d=[],u=!1;o.forEach(g=>{we(m,g)&&Fe(m,g)?(J(i,m,"hit",a),E(i,m),u=!0,g.hp-=m.power,g.hp<=0?(J(i,g,"explode",a),g.unpassable&&(i.boostalbe=!0),E(i,g)):d.push(g)):d.push(g)}),u||c.push(m),o.length=0,o.push(...d)}),r.length=0,r.push(...c),!n.rolling&&(o.forEach(m=>{we(m,n)&&Fe(m,n.children[1].children[0])?(J(i,n,"hit",a),J(i,m,"hit",a),n.hp-=m.power,m.hp-=1,m.hp<=0?(J(i,m,"explode",a),m.unpassable&&(i.boostalbe=!0),E(i,m)):l.push(m)):l.push(m),m.hitMark>0&&(m.hitMark-=1,m.hitMark==0&&m.traverse(d=>{d.isMesh&&d.material.color.set(16777215)}))}),o.length=0,o.push(...l),c.length=0,s.forEach(m=>{we(m,n)&&Fe(m,n.children[1].children[0])?(J(i,n,"hit",a),n.hp-=m.power,E(i,m)):c.push(m)}),s.length=0,s.push(...c),n.hp<0&&(n.hp=0))}function En(i,e){if(!e||e.length<1)return;let t=e.filter(a=>a.speed&&(a.position.z-=a.speed,a.position.y>0?a.position.y+=a.speed/2:a.position.y-=a.speed/2,a.position.x>0,a.position.x+=a.speed/3,a.position<-200)?(i.remove(a),!1):!0);e.length=0,e.push(...t)}const Qn={baseNPCBasic:{npcGlb:"artSrc/npcShip3.glb",type:"npcShip",collisionSize:10,hp:30,power:3,maxSpeed:3,speedAccel:[.1,.1,.1],speedDecel:[.9,.9,.9],speed:[0,0,0],defaultSpeed:[0,0,0],targetPosition:[],targetRotation:[0,0,0],blasterColor:"red",blasterShape:"capsule",blasterRadius:1.5,blasterLength:3,blasterSpeed:10,blasterPower:1,blasterSoundSrc:"soundSrc/npcBlast3.mp3"},droneBasic:{npcGlb:"artSrc/npcShip1.glb",type:"npcShip",collisionSize:8,hp:1,power:3,maxSpeed:3,speedAccel:[.5,.5,.5],speedDecel:[.85,.85,.85],speed:[0,0,0],defaultSpeed:[0,0,0],targetPosition:[],targetRotation:[0,0,0],blasterColor:"red",blasterShape:"capsule",blasterRadius:.5,blasterLength:2,blasterSpeed:6,blasterPower:1,blasterSoundSrc:"soundSrc/npcBlast1.mp3"},bomberBasic:{npcGlb:"artSrc/npcShip3.glb",type:"npcShip",collisionSize:10,hp:5,power:7,maxSpeed:1,speedAccel:[.1,.1,.1],speedDecel:[.92,.92,.92],speed:[0,0,0],defaultSpeed:[0,0,0],targetPosition:[],targetRotation:[0,0,0],blasterColor:"violet",blasterShape:"sphere",blasterRadius:4,blasterLength:4,blasterSpeed:3,blasterPower:5,blasterSoundSrc:"soundSrc/npcBlast3.mp3"},fighterBasic:{npcGlb:"artSrc/npcShip2.glb",type:"npcShip",collisionSize:8,hp:3,power:5,maxSpeed:3,speedAccel:[.3,.3,.3],speedDecel:[.87,.87,.87],speed:[0,0,0],defaultSpeed:[0,0,0],targetPosition:[],targetRotation:[0,0,0],blasterColor:"red",blasterShape:"capsule",blasterRadius:.7,blasterLength:10,blasterSpeed:9,blasterPower:2,blasterSoundSrc:"soundSrc/npcBlast2.mp3"},destroyerBasic:{npcGlb:"artSrc/npcShip4.glb",type:"npcShip",collisionSize:10,hp:10,power:7,maxSpeed:2,speedAccel:[.2,.2,.2],speedDecel:[.91,.91,.91],speed:[0,0,0],defaultSpeed:[0,0,0],targetPosition:[],targetRotation:[0,0,0],blasterColor:"red",blasterShape:"capsule",blasterRadius:.9,blasterLength:14,blasterSpeed:10,blasterPower:3,blasterSoundSrc:"soundSrc/npcBlast4.mp3"},destroyerStrongerBasic:{npcGlb:"artSrc/npcShip4.glb",type:"npcShip",collisionSize:10,hp:50,power:10,maxSpeed:2,speedAccel:[.3,.3,.3],speedDecel:[.91,.91,.91],speed:[0,0,0],defaultSpeed:[0,0,0],targetPosition:[],targetRotation:[0,0,0],blasterColor:"red",blasterShape:"capsule",blasterRadius:.9,blasterLength:14,blasterSpeed:10,blasterPower:3,blasterSoundSrc:"soundSrc/npcBlast4.mp3"},cruiserBasic:{npcGlb:"artSrc/npcShip10.glb",type:"npcHeavy",collisionSize:17,hp:45,power:20,maxSpeed:1,speedAccel:[.05,.05,.05],speedDecel:[.95,.95,.95],speed:[0,0,0],defaultSpeed:[0,0,0],targetPosition:[],targetRotation:[0,0,0],blasterColor:"violet",blasterShape:"capsule",blasterRadius:1.3,blasterLength:20,blasterSpeed:7,blasterPower:5,blasterSoundSrc:"soundSrc/npcBlas10.mp3"},cruiserBossBasic:{npcGlb:"artSrc/npcShip10.glb",type:"npcHeavy",collisionSize:17,hp:220,power:50,maxSpeed:1,speedAccel:[.05,.05,.05],speedDecel:[.95,.95,.95],speed:[0,0,0],defaultSpeed:[0,0,0],targetPosition:[],targetRotation:[0,0,0],blasterColor:"violet",blasterShape:"capsule",blasterRadius:1.3,blasterLength:20,blasterSpeed:7,blasterPower:5,unpassable:!0,blasterSoundSrc:"soundSrc/npcBlast10.mp3"},carrierBasic:{npcGlb:"artSrc/npcShip10.glb",type:"npcHeavy",collisionSize:17,hp:500,power:20,maxSpeed:1,speedAccel:[.05,.05,.05],speedDecel:[.95,.95,.95],speed:[0,0,0],defaultSpeed:[0,0,0],targetPosition:[],targetRotation:[0,0,0],blasterColor:"violet",blasterShape:"capsule",blasterRadius:1.3,blasterLength:20,blasterSpeed:7,blasterPower:5,blasterSoundSrc:"soundSrc/npcBlast10.mp3"},bossBasic:{npcGlb:"artSrc/npcShip100.glb",type:"npcHeavy",collisionSize:30,hp:450,power:10,maxSpeed:1,speedAccel:[.2,.2,.2],speedDecel:[.91,.91,.91],speed:[0,0,0],defaultSpeed:[0,0,0],targetPosition:[],targetRotation:[0,0,0],blasterColor:"violet",blasterShape:"sphere",blasterRadius:3,blasterLength:3,blasterSpeed:5,blasterPower:7,unpassable:!0,blasterSoundSrc:"soundSrc/npcBlast3.mp3"},asteroid1FastBasic:{npcGlb:"artSrc/asteroid1.glb",type:"asteroid",collisionSize:15,hp:3,power:4,defaultSpeed:[0,0,-9],rotatingSpeed:[0,0,0]},asteroid2FastBasic:{npcGlb:"artSrc/asteroid2.glb",type:"asteroid",collisionSize:15,hp:3,power:4,defaultSpeed:[0,0,-9],rotatingSpeed:[0,0,0]},asteroid1Basic:{npcGlb:"artSrc/asteroid1.glb",type:"asteroid",collisionSize:15,hp:3,power:3,defaultSpeed:[0,0,-6],rotatingSpeed:[0,0,0]},asteroid2Basic:{npcGlb:"artSrc/asteroid2.glb",type:"asteroid",collisionSize:15,hp:3,power:3,defaultSpeed:[0,0,-6],rotatingSpeed:[0,0,0]},asteroid1SlowBasic:{npcGlb:"artSrc/asteroid1.glb",type:"asteroid",collisionSize:15,hp:3,power:2,defaultSpeed:[0,0,-3],rotatingSpeed:[0,0,0]},asteroid2SlowBasic:{npcGlb:"artSrc/asteroid2.glb",type:"asteroid",collisionSize:15,hp:3,power:2,defaultSpeed:[0,0,-3],rotatingSpeed:[0,0,0]}},Cn={defaultAI:{timeTriggered:[{triggerTime:0,aiPattern:"basicPattern"},{triggerTime:250,aiPattern:"loopPattern"},{triggerTime:300,aiPattern:"randomMove"}],hpTriggered:[]},droneAI:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:500,aiPattern:"randomMove"}],hpTriggered:[]},droneAIrandom:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:30,aiPattern:"droneBlastLoop"},{triggerTime:200,aiPattern:"droneRandomMove"}],hpTriggered:[]},droneAIrandom1H:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove1H"}],hpTriggered:[]},droneAIrandom2H:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove2H"}],hpTriggered:[]},droneAIrandom1Q:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove1Q"}],hpTriggered:[]},droneAIrandom2Q:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove2Q"}],hpTriggered:[]},droneAIrandom3Q:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove3Q"}],hpTriggered:[]},droneAIrandom4Q:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove4Q"}],hpTriggered:[]},droneAIrandom1hQ:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove1hQ"}],hpTriggered:[]},droneAIrandom2hQ:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove2hQ"}],hpTriggered:[]},droneAIrandom3hQ:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove3hQ"}],hpTriggered:[]},droneAIrandom4hQ:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove4hQ"}],hpTriggered:[]},droneAIrandom5hQ:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove5hQ"}],hpTriggered:[]},droneAIrandom6hQ:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove6hQ"}],hpTriggered:[]},droneAIrandom7hQ:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove7hQ"}],hpTriggered:[]},droneAIrandom8hQ:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove8hQ"}],hpTriggered:[]},droneAIrandom1HF:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove1HF"}],hpTriggered:[]},droneAIrandom2HF:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove2HF"}],hpTriggered:[]},droneAIrandom1QF:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove1QF"}],hpTriggered:[]},droneAIrandom2QF:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove2QF"}],hpTriggered:[]},droneAIrandom3QF:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove3QF"}],hpTriggered:[]},droneAIrandom4QF:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove4QF"}],hpTriggered:[]},droneAIrandom1hQF:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove1hQF"}],hpTriggered:[]},droneAIrandom2hQF:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove2hQF"}],hpTriggered:[]},droneAIrandom3hQF:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove3hQF"}],hpTriggered:[]},droneAIrandom4hQF:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove4hQF"}],hpTriggered:[]},droneAIrandom5hQF:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove5hQF"}],hpTriggered:[]},droneAIrandom6hQF:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove6hQF"}],hpTriggered:[]},droneAIrandom7hQF:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove7hQF"}],hpTriggered:[]},droneAIrandom8hQF:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove8hQF"}],hpTriggered:[]},droneAIrandom1HR:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove1HR"}],hpTriggered:[]},droneAIrandom2HR:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove2HR"}],hpTriggered:[]},droneAIrandom1hQFRS:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromR"},{triggerTime:15,aiPattern:"droneSortieFromRAfter"},{triggerTime:160,aiPattern:"droneRandomMove1hQF"}],hpTriggered:[]},droneAIrandom2hQFRS:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromR"},{triggerTime:15,aiPattern:"droneSortieFromRAfter"},{triggerTime:130,aiPattern:"droneRandomMove2hQF"}],hpTriggered:[]},droneAIrandom3hQFRS:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromR"},{triggerTime:15,aiPattern:"droneSortieFromRAfter"},{triggerTime:180,aiPattern:"droneRandomMove3hQF"}],hpTriggered:[]},droneAIrandom4hQFRS:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromR"},{triggerTime:15,aiPattern:"droneSortieFromRAfter"},{triggerTime:150,aiPattern:"droneRandomMove4hQF"}],hpTriggered:[]},droneAIrandom5hQFRS:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromR"},{triggerTime:15,aiPattern:"droneSortieFromRAfter"},{triggerTime:120,aiPattern:"droneRandomMove5hQF"}],hpTriggered:[]},droneAIrandom6hQFRS:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromR"},{triggerTime:15,aiPattern:"droneSortieFromRAfter"},{triggerTime:170,aiPattern:"droneRandomMove6hQF"}],hpTriggered:[]},droneAIrandom7hQFRS:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromR"},{triggerTime:15,aiPattern:"droneSortieFromRAfter"},{triggerTime:140,aiPattern:"droneRandomMove7hQF"}],hpTriggered:[]},droneAIrandom8hQFRS:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromR"},{triggerTime:15,aiPattern:"droneSortieFromRAfter"},{triggerTime:190,aiPattern:"droneRandomMove8hQF"}],hpTriggered:[]},droneAIrandom1hQFLS:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromL"},{triggerTime:15,aiPattern:"droneSortieFromLAfter"},{triggerTime:160,aiPattern:"droneRandomMove1hQF"}],hpTriggered:[]},droneAIrandom2hQFLS:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromL"},{triggerTime:15,aiPattern:"droneSortieFromLAfter"},{triggerTime:130,aiPattern:"droneRandomMove2hQF"}],hpTriggered:[]},droneAIrandom3hQFLS:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromL"},{triggerTime:15,aiPattern:"droneSortieFromLAfter"},{triggerTime:180,aiPattern:"droneRandomMove3hQF"}],hpTriggered:[]},droneAIrandom4hQFLS:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromL"},{triggerTime:15,aiPattern:"droneSortieFromLAfter"},{triggerTime:150,aiPattern:"droneRandomMove4hQF"}],hpTriggered:[]},droneAIrandom5hQFLS:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromL"},{triggerTime:15,aiPattern:"droneSortieFromLAfter"},{triggerTime:120,aiPattern:"droneRandomMove5hQF"}],hpTriggered:[]},droneAIrandom6hQFLS:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromL"},{triggerTime:15,aiPattern:"droneSortieFromLAfter"},{triggerTime:170,aiPattern:"droneRandomMove6hQF"}],hpTriggered:[]},droneAIrandom7hQFLS:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromL"},{triggerTime:15,aiPattern:"droneSortieFromLAfter"},{triggerTime:140,aiPattern:"droneRandomMove7hQF"}],hpTriggered:[]},droneAIrandom8hQFLS:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromL"},{triggerTime:15,aiPattern:"droneSortieFromLAfter"},{triggerTime:190,aiPattern:"droneRandomMove8hQF"}],hpTriggered:[]},droneAIrandom1hQFRSC:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromR"},{triggerTime:15,aiPattern:"droneSortieFromRAfter"},{triggerTime:160,aiPattern:"droneRandomMove1hQF"},{triggerTime:490,aiPattern:"charge"}],hpTriggered:[]},droneAIrandom2hQFRSC:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromR"},{triggerTime:15,aiPattern:"droneSortieFromRAfter"},{triggerTime:130,aiPattern:"droneRandomMove2hQF"},{triggerTime:490,aiPattern:"charge"}],hpTriggered:[]},droneAIrandom3hQFRSC:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromR"},{triggerTime:15,aiPattern:"droneSortieFromRAfter"},{triggerTime:180,aiPattern:"droneRandomMove3hQF"},{triggerTime:490,aiPattern:"charge"}],hpTriggered:[]},droneAIrandom4hQFRSC:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromR"},{triggerTime:15,aiPattern:"droneSortieFromRAfter"},{triggerTime:150,aiPattern:"droneRandomMove4hQF"},{triggerTime:490,aiPattern:"charge"}],hpTriggered:[]},droneAIrandom5hQFRSC:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromR"},{triggerTime:15,aiPattern:"droneSortieFromRAfter"},{triggerTime:120,aiPattern:"droneRandomMove5hQF"},{triggerTime:490,aiPattern:"charge"}],hpTriggered:[]},droneAIrandom6hQFRSC:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromR"},{triggerTime:15,aiPattern:"droneSortieFromRAfter"},{triggerTime:170,aiPattern:"droneRandomMove6hQF"},{triggerTime:490,aiPattern:"charge"}],hpTriggered:[]},droneAIrandom7hQFRSC:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromR"},{triggerTime:15,aiPattern:"droneSortieFromRAfter"},{triggerTime:140,aiPattern:"droneRandomMove7hQF"},{triggerTime:490,aiPattern:"charge"}],hpTriggered:[]},droneAIrandom8hQFRSC:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromR"},{triggerTime:15,aiPattern:"droneSortieFromRAfter"},{triggerTime:190,aiPattern:"droneRandomMove8hQF"},{triggerTime:490,aiPattern:"charge"}],hpTriggered:[]},droneAIrandom1hQFLSC:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromL"},{triggerTime:15,aiPattern:"droneSortieFromLAfter"},{triggerTime:160,aiPattern:"droneRandomMove1hQF"},{triggerTime:490,aiPattern:"charge"}],hpTriggered:[]},droneAIrandom2hQFLSC:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromL"},{triggerTime:15,aiPattern:"droneSortieFromLAfter"},{triggerTime:130,aiPattern:"droneRandomMove2hQF"},{triggerTime:490,aiPattern:"charge"}],hpTriggered:[]},droneAIrandom3hQFLSC:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromL"},{triggerTime:15,aiPattern:"droneSortieFromLAfter"},{triggerTime:180,aiPattern:"droneRandomMove3hQF"},{triggerTime:490,aiPattern:"charge"}],hpTriggered:[]},droneAIrandom4hQFLSC:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromL"},{triggerTime:15,aiPattern:"droneSortieFromLAfter"},{triggerTime:150,aiPattern:"droneRandomMove4hQF"},{triggerTime:490,aiPattern:"charge"}],hpTriggered:[]},droneAIrandom5hQFLSC:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromL"},{triggerTime:15,aiPattern:"droneSortieFromLAfter"},{triggerTime:120,aiPattern:"droneRandomMove5hQF"},{triggerTime:490,aiPattern:"charge"}],hpTriggered:[]},droneAIrandom6hQFLSC:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromL"},{triggerTime:15,aiPattern:"droneSortieFromLAfter"},{triggerTime:170,aiPattern:"droneRandomMove6hQF"},{triggerTime:490,aiPattern:"charge"}],hpTriggered:[]},droneAIrandom7hQFLSC:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromL"},{triggerTime:15,aiPattern:"droneSortieFromLAfter"},{triggerTime:140,aiPattern:"droneRandomMove7hQF"},{triggerTime:490,aiPattern:"charge"}],hpTriggered:[]},droneAIrandom8hQFLSC:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromL"},{triggerTime:15,aiPattern:"droneSortieFromLAfter"},{triggerTime:190,aiPattern:"droneRandomMove8hQF"},{triggerTime:490,aiPattern:"charge"}],hpTriggered:[]},droneAIrandom1QR:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove1QR"}],hpTriggered:[]},droneAIrandom2QR:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove2QR"}],hpTriggered:[]},droneAIrandom3QR:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove3QR"}],hpTriggered:[]},droneAIrandom4QR:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove4QR"}],hpTriggered:[]},droneAIrandom1hQR:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove1hQR"}],hpTriggered:[]},droneAIrandom2hQR:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove2hQR"}],hpTriggered:[]},droneAIrandom3hQR:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove3hQR"}],hpTriggered:[]},droneAIrandom4hQR:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove4hQR"}],hpTriggered:[]},droneAIrandom5hQR:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove5hQR"}],hpTriggered:[]},droneAIrandom6hQR:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove6hQR"}],hpTriggered:[]},droneAIrandom7hQR:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove7hQR"}],hpTriggered:[]},droneAIrandom8hQR:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove8hQR"}],hpTriggered:[]},droneAIrandom1QRC:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove1QR"},{triggerTime:450,aiPattern:"charge"}],hpTriggered:[]},droneAIrandom2QRC:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove2QR"},{triggerTime:450,aiPattern:"charge"}],hpTriggered:[]},droneAIrandom3QRC:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove3QR"},{triggerTime:450,aiPattern:"charge"}],hpTriggered:[]},droneAIrandom4QRC:{timeTriggered:[{triggerTime:0,aiPattern:"droneIntroPattern"},{triggerTime:200,aiPattern:"droneRandomMove4QR"},{triggerTime:450,aiPattern:"charge"}],hpTriggered:[]},droneAIrandom1hQRS:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromR"},{triggerTime:15,aiPattern:"droneSortieFromRAfter"},{triggerTime:220,aiPattern:"droneRandomMove1hQR"}],hpTriggered:[]},droneAIrandom2hQRS:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromR"},{triggerTime:15,aiPattern:"droneSortieFromRAfter"},{triggerTime:210,aiPattern:"droneRandomMove2hQR"}],hpTriggered:[]},droneAIrandom3hQRS:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromR"},{triggerTime:15,aiPattern:"droneSortieFromRAfter"},{triggerTime:220,aiPattern:"droneRandomMove3hQR"}],hpTriggered:[]},droneAIrandom4hQRS:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromR"},{triggerTime:15,aiPattern:"droneSortieFromRAfter"},{triggerTime:210,aiPattern:"droneRandomMove4hQR"}],hpTriggered:[]},droneAIrandom5hQRS:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromR"},{triggerTime:15,aiPattern:"droneSortieFromRAfter"},{triggerTime:200,aiPattern:"droneRandomMove5hQR"}],hpTriggered:[]},droneAIrandom6hQRS:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromR"},{triggerTime:15,aiPattern:"droneSortieFromRAfter"},{triggerTime:190,aiPattern:"droneRandomMove6hQR"}],hpTriggered:[]},droneAIrandom7hQRS:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromR"},{triggerTime:15,aiPattern:"droneSortieFromRAfter"},{triggerTime:200,aiPattern:"droneRandomMove7hQR"}],hpTriggered:[]},droneAIrandom8hQRS:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromR"},{triggerTime:15,aiPattern:"droneSortieFromRAfter"},{triggerTime:190,aiPattern:"droneRandomMove8hQR"}],hpTriggered:[]},droneAIrandom1hQLS:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromL"},{triggerTime:15,aiPattern:"droneSortieFromLAfter"},{triggerTime:220,aiPattern:"droneRandomMove1hQR"}],hpTriggered:[]},droneAIrandom2hQLS:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromL"},{triggerTime:15,aiPattern:"droneSortieFromLAfter"},{triggerTime:210,aiPattern:"droneRandomMove2hQR"}],hpTriggered:[]},droneAIrandom3hQLS:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromL"},{triggerTime:15,aiPattern:"droneSortieFromLAfter"},{triggerTime:220,aiPattern:"droneRandomMove3hQR"}],hpTriggered:[]},droneAIrandom4hQLS:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromL"},{triggerTime:15,aiPattern:"droneSortieFromLAfter"},{triggerTime:210,aiPattern:"droneRandomMove4hQR"}],hpTriggered:[]},droneAIrandom5hQLS:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromL"},{triggerTime:15,aiPattern:"droneSortieFromLAfter"},{triggerTime:200,aiPattern:"droneRandomMove5hQR"}],hpTriggered:[]},droneAIrandom6hQLS:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromL"},{triggerTime:15,aiPattern:"droneSortieFromLAfter"},{triggerTime:190,aiPattern:"droneRandomMove6hQR"}],hpTriggered:[]},droneAIrandom7hQLS:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromL"},{triggerTime:15,aiPattern:"droneSortieFromLAfter"},{triggerTime:200,aiPattern:"droneRandomMove7hQR"}],hpTriggered:[]},droneAIrandom8hQLS:{timeTriggered:[{triggerTime:0,aiPattern:"droneSortieFromL"},{triggerTime:15,aiPattern:"droneSortieFromLAfter"},{triggerTime:190,aiPattern:"droneRandomMove8hQR"}],hpTriggered:[]},bomberAI:{timeTriggered:[{triggerTime:0,aiPattern:"bomberIntroPattern"},{triggerTime:550,aiPattern:"loopPattern"},{triggerTime:900,aiPattern:"randomMove"}],hpTriggered:[]},bomberAIstatic:{timeTriggered:[{triggerTime:0,aiPattern:"bomberIntroPattern"},{triggerTime:60,aiPattern:"bomberBlastLoop"},{triggerTime:500,aiPattern:"bomberDefaultMoveZ"},{triggerTime:500,aiPattern:"bomberBlastLoop"}],hpTriggered:[]},fighterAIrandom:{timeTriggered:[{triggerTime:0,aiPattern:"fighterIntroPattern"},{triggerTime:30,aiPattern:"fighterBlastLoop"},{triggerTime:180,aiPattern:"fighterRandomMove"}],hpTriggered:[]},fighterAIrandom1H:{timeTriggered:[{triggerTime:0,aiPattern:"fighterIntroPattern"},{triggerTime:180,aiPattern:"fighterRandomMove1H"}],hpTriggered:[]},fighterAIrandom2H:{timeTriggered:[{triggerTime:0,aiPattern:"fighterIntroPattern"},{triggerTime:180,aiPattern:"fighterRandomMove2H"}],hpTriggered:[]},fighterAIrandom1Q:{timeTriggered:[{triggerTime:0,aiPattern:"fighterIntroPattern"},{triggerTime:180,aiPattern:"fighterRandomMove1Q"}],hpTriggered:[]},fighterAIrandom2Q:{timeTriggered:[{triggerTime:0,aiPattern:"fighterIntroPattern"},{triggerTime:180,aiPattern:"fighterRandomMove2Q"}],hpTriggered:[]},fighterAIrandom3Q:{timeTriggered:[{triggerTime:0,aiPattern:"fighterIntroPattern"},{triggerTime:180,aiPattern:"fighterRandomMove3Q"}],hpTriggered:[]},fighterAIrandom4Q:{timeTriggered:[{triggerTime:0,aiPattern:"fighterIntroPattern"},{triggerTime:180,aiPattern:"fighterRandomMove4Q"}],hpTriggered:[]},fighterAIrandom1HF:{timeTriggered:[{triggerTime:0,aiPattern:"fighterIntroPattern"},{triggerTime:180,aiPattern:"fighterRandomMove1HF"}],hpTriggered:[]},fighterAIrandom2HF:{timeTriggered:[{triggerTime:0,aiPattern:"fighterIntroPattern"},{triggerTime:180,aiPattern:"fighterRandomMove2HF"}],hpTriggered:[]},fighterAIrandom1QF:{timeTriggered:[{triggerTime:0,aiPattern:"fighterIntroPattern"},{triggerTime:180,aiPattern:"fighterRandomMove1QF"}],hpTriggered:[]},fighterAIrandom2QF:{timeTriggered:[{triggerTime:0,aiPattern:"fighterIntroPattern"},{triggerTime:180,aiPattern:"fighterRandomMove2QF"}],hpTriggered:[]},fighterAIrandom3QF:{timeTriggered:[{triggerTime:0,aiPattern:"fighterIntroPattern"},{triggerTime:180,aiPattern:"fighterRandomMove3QF"}],hpTriggered:[]},fighterAIrandom4QF:{timeTriggered:[{triggerTime:0,aiPattern:"fighterIntroPattern"},{triggerTime:180,aiPattern:"fighterRandomMove4QF"}],hpTriggered:[]},fighterAIrandom1HR:{timeTriggered:[{triggerTime:0,aiPattern:"fighterIntroPattern"},{triggerTime:180,aiPattern:"fighterRandomMove1HR"}],hpTriggered:[]},fighterAIrandom2HR:{timeTriggered:[{triggerTime:0,aiPattern:"fighterIntroPattern"},{triggerTime:180,aiPattern:"fighterRandomMove2HR"}],hpTriggered:[]},fighterAIrandom1QR:{timeTriggered:[{triggerTime:0,aiPattern:"fighterIntroPattern"},{triggerTime:180,aiPattern:"fighterRandomMove1QR"}],hpTriggered:[]},fighterAIrandom2QR:{timeTriggered:[{triggerTime:0,aiPattern:"fighterIntroPattern"},{triggerTime:180,aiPattern:"fighterRandomMove2QR"}],hpTriggered:[]},fighterAIrandom3QR:{timeTriggered:[{triggerTime:0,aiPattern:"fighterIntroPattern"},{triggerTime:180,aiPattern:"fighterRandomMove3QR"}],hpTriggered:[]},fighterAIrandom4QR:{timeTriggered:[{triggerTime:0,aiPattern:"fighterIntroPattern"},{triggerTime:180,aiPattern:"fighterRandomMove4QR"}],hpTriggered:[]},fighterAIrandom1QRC:{timeTriggered:[{triggerTime:0,aiPattern:"fighterIntroPattern"},{triggerTime:180,aiPattern:"fighterRandomMove1QR"},{triggerTime:450,aiPattern:"charge"}],hpTriggered:[]},fighterAIrandom2QRC:{timeTriggered:[{triggerTime:0,aiPattern:"fighterIntroPattern"},{triggerTime:180,aiPattern:"fighterRandomMove2QR"},{triggerTime:450,aiPattern:"charge"}],hpTriggered:[]},fighterAIrandom3QRC:{timeTriggered:[{triggerTime:0,aiPattern:"fighterIntroPattern"},{triggerTime:180,aiPattern:"fighterRandomMove3QR"},{triggerTime:450,aiPattern:"charge"}],hpTriggered:[]},fighterAIrandom4QRC:{timeTriggered:[{triggerTime:0,aiPattern:"fighterIntroPattern"},{triggerTime:180,aiPattern:"fighterRandomMove4QR"},{triggerTime:450,aiPattern:"charge"}],hpTriggered:[]},destroyerAIrandom:{timeTriggered:[{triggerTime:0,aiPattern:"destroyerIntroPattern"},{triggerTime:60,aiPattern:"destroyerBlastLoop"},{triggerTime:300,aiPattern:"destroyerRandomMove"}],hpTriggered:[{triggerHP:4,aiPattern:"charge"}]},destroyerAIrandomC:{timeTriggered:[{triggerTime:0,aiPattern:"destroyerIntroPattern"},{triggerTime:60,aiPattern:"destroyerBlastLoop"},{triggerTime:300,aiPattern:"destroyerRandomMove"},{triggerTime:700,aiPattern:"charge"}],hpTriggered:[{triggerHP:5,aiPattern:"charge"}]},destroyerAIrandom1H:{timeTriggered:[{triggerTime:0,aiPattern:"destroyerIntroPattern"},{triggerTime:300,aiPattern:"destroyerRandomMove1H"}],hpTriggered:[]},destroyerAIrandom2H:{timeTriggered:[{triggerTime:0,aiPattern:"destroyerIntroPattern"},{triggerTime:300,aiPattern:"destroyerRandomMove2H"}],hpTriggered:[]},destroyerAIrandom1Q:{timeTriggered:[{triggerTime:0,aiPattern:"destroyerIntroPattern"},{triggerTime:300,aiPattern:"destroyerRandomMove1Q"}],hpTriggered:[]},destroyerAIrandom2Q:{timeTriggered:[{triggerTime:0,aiPattern:"destroyerIntroPattern"},{triggerTime:300,aiPattern:"destroyerRandomMove2Q"}],hpTriggered:[]},destroyerAIrandom3Q:{timeTriggered:[{triggerTime:0,aiPattern:"destroyerIntroPattern"},{triggerTime:300,aiPattern:"destroyerRandomMove3Q"}],hpTriggered:[]},destroyerAIrandom4Q:{timeTriggered:[{triggerTime:0,aiPattern:"destroyerIntroPattern"},{triggerTime:300,aiPattern:"destroyerRandomMove4Q"}],hpTriggered:[]},destroyerAIrandom1HF:{timeTriggered:[{triggerTime:0,aiPattern:"destroyerIntroPattern"},{triggerTime:300,aiPattern:"destroyerRandomMove1HF"}],hpTriggered:[]},destroyerAIrandom2HF:{timeTriggered:[{triggerTime:0,aiPattern:"destroyerIntroPattern"},{triggerTime:300,aiPattern:"destroyerRandomMove2HF"}],hpTriggered:[]},destroyerAIrandom1QF:{timeTriggered:[{triggerTime:0,aiPattern:"destroyerIntroPattern"},{triggerTime:300,aiPattern:"destroyerRandomMove1QF"}],hpTriggered:[]},destroyerAIrandom2QF:{timeTriggered:[{triggerTime:0,aiPattern:"destroyerIntroPattern"},{triggerTime:300,aiPattern:"destroyerRandomMove2QF"}],hpTriggered:[]},destroyerAIrandom3QF:{timeTriggered:[{triggerTime:0,aiPattern:"destroyerIntroPattern"},{triggerTime:300,aiPattern:"destroyerRandomMove3QF"}],hpTriggered:[]},destroyerAIrandom4QF:{timeTriggered:[{triggerTime:0,aiPattern:"destroyerIntroPattern"},{triggerTime:300,aiPattern:"destroyerRandomMove4QF"}],hpTriggered:[]},destroyerAIrandom1HFC:{timeTriggered:[{triggerTime:0,aiPattern:"destroyerIntroPattern"},{triggerTime:300,aiPattern:"destroyerRandomMove1HF"}],hpTriggered:[{triggerHP:3,aiPattern:"charge"}]},destroyerAIrandom2HFC:{timeTriggered:[{triggerTime:0,aiPattern:"destroyerIntroPattern"},{triggerTime:300,aiPattern:"destroyerRandomMove2HF"}],hpTriggered:[{triggerHP:3,aiPattern:"charge"}]},destroyerAIrandom1QFC:{timeTriggered:[{triggerTime:0,aiPattern:"destroyerIntroPattern"},{triggerTime:300,aiPattern:"destroyerRandomMove1QF"}],hpTriggered:[{triggerHP:3,aiPattern:"charge"}]},destroyerAIrandom2QFC:{timeTriggered:[{triggerTime:0,aiPattern:"destroyerIntroPattern"},{triggerTime:300,aiPattern:"destroyerRandomMove2QF"}],hpTriggered:[{triggerHP:3,aiPattern:"charge"}]},destroyerAIrandom3QFC:{timeTriggered:[{triggerTime:0,aiPattern:"destroyerIntroPattern"},{triggerTime:300,aiPattern:"destroyerRandomMove3QF"}],hpTriggered:[{triggerHP:3,aiPattern:"charge"}]},destroyerAIrandom4QFC:{timeTriggered:[{triggerTime:0,aiPattern:"destroyerIntroPattern"},{triggerTime:300,aiPattern:"destroyerRandomMove4QF"}],hpTriggered:[{triggerHP:3,aiPattern:"charge"}]},destroyerAIrandom1HR:{timeTriggered:[{triggerTime:0,aiPattern:"destroyerIntroPattern"},{triggerTime:300,aiPattern:"destroyerRandomMove1HR"}],hpTriggered:[]},destroyerAIrandom2HR:{timeTriggered:[{triggerTime:0,aiPattern:"destroyerIntroPattern"},{triggerTime:300,aiPattern:"destroyerRandomMove2HR"}],hpTriggered:[]},destroyerAIrandom1QR:{timeTriggered:[{triggerTime:0,aiPattern:"destroyerIntroPattern"},{triggerTime:300,aiPattern:"destroyerRandomMove1QR"}],hpTriggered:[]},destroyerAIrandom2QR:{timeTriggered:[{triggerTime:0,aiPattern:"destroyerIntroPattern"},{triggerTime:300,aiPattern:"destroyerRandomMove2QR"}],hpTriggered:[]},destroyerAIrandom3QR:{timeTriggered:[{triggerTime:0,aiPattern:"destroyerIntroPattern"},{triggerTime:300,aiPattern:"destroyerRandomMove3QR"}],hpTriggered:[]},destroyerAIrandom4QR:{timeTriggered:[{triggerTime:0,aiPattern:"destroyerIntroPattern"},{triggerTime:300,aiPattern:"destroyerRandomMove4QR"}],hpTriggered:[]},cruiserAI:{timeTriggered:[{triggerTime:0,aiPattern:"cruiserIntroPattern"},{triggerTime:600,aiPattern:"loopPattern"},{triggerTime:300,aiPattern:"randomMove"}],hpTriggered:[]},cruiserAIstaticCarrier:{timeTriggered:[{triggerTime:0,aiPattern:"cruiserIntroPattern"},{triggerTime:60,aiPattern:"cruiserBlastLoop"},{triggerTime:500,aiPattern:"cruiserDefaultMoveZ"},{triggerTime:500,aiPattern:"cruiserBlastLoop"}],hpTriggered:[]},cruiserAIstatic:{timeTriggered:[{triggerTime:0,aiPattern:"cruiserIntroPattern"},{triggerTime:60,aiPattern:"cruiserBlastLoop"},{triggerTime:500,aiPattern:"cruiserDefaultMoveZ"},{triggerTime:500,aiPattern:"cruiserBlastLoop"}],hpTriggered:[]},cruiserAIstaticC:{timeTriggered:[{triggerTime:0,aiPattern:"cruiserIntroPattern"},{triggerTime:60,aiPattern:"cruiserBlastLoop"},{triggerTime:500,aiPattern:"cruiserDefaultMoveZ"},{triggerTime:500,aiPattern:"cruiserBlastLoop"}],hpTriggered:[{triggerHP:5,aiPattern:"charge"}]},cruiserBossAIstaticC:{timeTriggered:[{triggerTime:0,aiPattern:"cruiserBossIntroPattern"},{triggerTime:60,aiPattern:"cruiserBlastLoop"},{triggerTime:1050,aiPattern:"cruiserDefaultMoveZ"},{triggerTime:1050,aiPattern:"cruiserBlastLoop"}],hpTriggered:[{triggerHP:23,aiPattern:"charge"}]},asteroidAI:{timeTriggered:[{triggerTime:0,aiPattern:"asteroidIntroPattern"}],hpTriggered:[]},bossAI:{timeTriggered:[{triggerTime:0,aiPattern:"bossIntroPattern"},{triggerTime:10,aiPattern:"bossFirstAttack"},{triggerTime:500,aiPattern:"bossLoop"}],hpTriggered:[{triggerHP:55,aiPattern:"bossFinalLoop"}]}},lt={basicPattern:[{actionTime:0,action:"move",value:[0,0,-500]}],loopPattern:[{actionTime:0,action:"move",value:[10,5,0]},{actionTime:35,action:"setRotation",value:"pc"},{actionTime:50,action:"blaster",value:"pc"},{actionTime:70,action:"blaster",value:"pc"},{actionTime:110,action:"move",value:[-10,-5,0]},{actionTime:125,action:"setRotation",value:"pc"},{actionTime:140,action:"blaster",value:"pc"},{actionTime:160,action:"blaster",value:"pc"},{actionTime:180,action:"setPatternTime",value:0}],randomMove:[{actionTime:0,action:"randomMoveTo",value:[-20,20,-10,10,130,160]},{actionTime:50,action:"setRotation",value:"pc"},{actionTime:70,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:105,action:"setPatternTime",value:0}],charge:[{actionTime:10,action:"setRotation",value:"pc"},{actionTime:25,action:"setDefaultSpeed",value:[0,0,1]},{actionTime:30,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"setRotation",value:"pc"},{actionTime:60,action:"blaster",value:"front"},{actionTime:70,action:"setRotation",value:"pc"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"setRotation",value:"pc"},{actionTime:110,action:"blaster",value:"front"},{actionTime:120,action:"setRotation",value:"pc"},{actionTime:130,action:"setRotation",value:"pc"},{actionTime:140,action:"blaster",value:"front"},{actionTime:150,action:"setRotation",value:"pc"},{actionTime:160,action:"blaster",value:"front"},{actionTime:170,action:"setRotation",value:"pc"},{actionTime:180,action:"setRotation",value:"pc"}],droneIntroPattern:[{actionTime:0,action:"move",value:[0,0,-500]}],bomberIntroPattern:[{actionTime:0,action:"move",value:[0,0,-500]}],fighterIntroPattern:[{actionTime:0,action:"move",value:[0,0,-500]}],destroyerIntroPattern:[{actionTime:0,action:"move",value:[0,0,-500]}],cruiserIntroPattern:[{actionTime:0,action:"move",value:[0,0,-500]}],cruiserBossIntroPattern:[{actionTime:0,action:"move",value:[0,0,-400]}],asteroidIntroPattern:[],bossIntroPattern:[{actionTime:0,action:"move",value:[0,0,-500]}],droneBlastLoop:[{actionTime:60,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],droneRandomMove:[{actionTime:0,action:"randomMoveTo",value:[-30,30,-15,15,130,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:70,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:120,action:"setRotation",value:"pc"},{actionTime:140,action:"blaster",value:"front"},{actionTime:160,action:"blaster",value:"front"},{actionTime:180,action:"setPatternTime",value:0}],droneRandomMove1H:[{actionTime:0,action:"randomMoveTo",value:[10,30,-15,15,130,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneRandomMove2H:[{actionTime:0,action:"randomMoveTo",value:[-30,-10,15,15,130,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneRandomMove1Q:[{actionTime:0,action:"randomMoveTo",value:[10,30,5,15,130,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneRandomMove2Q:[{actionTime:0,action:"randomMoveTo",value:[-30,-10,5,15,130,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneRandomMove3Q:[{actionTime:0,action:"randomMoveTo",value:[10,30,-15,-5,130,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneRandomMove4Q:[{actionTime:0,action:"randomMoveTo",value:[-30,-10,-15,-5,130,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneRandomMove1hQ:[{actionTime:0,action:"randomMoveTo",value:[15,30,5,15,130,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneRandomMove2hQ:[{actionTime:0,action:"randomMoveTo",value:[0,15,5,15,130,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneRandomMove3hQ:[{actionTime:0,action:"randomMoveTo",value:[-15,0,5,15,130,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneRandomMove4hQ:[{actionTime:0,action:"randomMoveTo",value:[-30,-15,5,15,130,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneRandomMove5hQ:[{actionTime:0,action:"randomMoveTo",value:[15,30,-15,-5,130,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneRandomMove6hQ:[{actionTime:0,action:"randomMoveTo",value:[0,15,-15,-5,130,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneRandomMove7hQ:[{actionTime:0,action:"randomMoveTo",value:[-15,0,-15,-5,130,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneRandomMove8hQ:[{actionTime:0,action:"randomMoveTo",value:[-30,-15,-15,-5,130,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneRandomMove1HF:[{actionTime:0,action:"randomMoveTo",value:[5,25,-15,15,130,140]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneRandomMove2HF:[{actionTime:0,action:"randomMoveTo",value:[-25,-5,-15,15,130,140]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneRandomMove1hQF:[{actionTime:0,action:"randomMoveTo",value:[10,30,5,15,130,140]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneRandomMove2QF:[{actionTime:0,action:"randomMoveTo",value:[-30,-10,5,15,130,140]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneRandomMove3QF:[{actionTime:0,action:"randomMoveTo",value:[10,30,-15,-5,130,140]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneRandomMove4QF:[{actionTime:0,action:"randomMoveTo",value:[-30,-10,-15,-5,130,140]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneRandomMove1hQF:[{actionTime:0,action:"randomMoveTo",value:[15,30,5,15,130,140]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneRandomMove2hQF:[{actionTime:0,action:"randomMoveTo",value:[0,15,5,15,130,140]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneRandomMove3hQF:[{actionTime:0,action:"randomMoveTo",value:[-15,0,5,15,130,140]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneRandomMove4hQF:[{actionTime:0,action:"randomMoveTo",value:[-30,-15,5,15,130,140]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneRandomMove5hQF:[{actionTime:0,action:"randomMoveTo",value:[15,30,-15,-5,130,140]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneRandomMove6hQF:[{actionTime:0,action:"randomMoveTo",value:[0,15,-15,-5,130,140]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneRandomMove7hQF:[{actionTime:0,action:"randomMoveTo",value:[-15,0,-15,-5,130,140]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneRandomMove8hQF:[{actionTime:0,action:"randomMoveTo",value:[-30,-15,-15,-5,130,140]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneRandomMove1HR:[{actionTime:0,action:"randomMoveTo",value:[5,25,-15,15,150,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneRandomMove2HR:[{actionTime:0,action:"randomMoveTo",value:[-25,-5,-15,15,150,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneRandomMove1QR:[{actionTime:0,action:"randomMoveTo",value:[10,30,5,15,150,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneRandomMove2QR:[{actionTime:0,action:"randomMoveTo",value:[-30,-10,5,15,150,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneRandomMove3QR:[{actionTime:0,action:"randomMoveTo",value:[10,30,-15,-5,150,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneRandomMove4QR:[{actionTime:0,action:"randomMoveTo",value:[-30,-10,-15,-5,150,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneRandomMove1hQR:[{actionTime:0,action:"randomMoveTo",value:[15,30,5,15,150,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneRandomMove2hQR:[{actionTime:0,action:"randomMoveTo",value:[0,15,5,15,150,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneRandomMove3hQR:[{actionTime:0,action:"randomMoveTo",value:[-15,0,5,15,150,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneRandomMove4hQR:[{actionTime:0,action:"randomMoveTo",value:[-30,-15,5,15,150,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneRandomMove5hQR:[{actionTime:0,action:"randomMoveTo",value:[15,30,-15,-5,150,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneRandomMove6hQR:[{actionTime:0,action:"randomMoveTo",value:[0,15,-15,-5,150,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneRandomMove7hQR:[{actionTime:0,action:"randomMoveTo",value:[-15,0,-15,-5,150,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneRandomMove8hQR:[{actionTime:0,action:"randomMoveTo",value:[-30,-15,-15,-5,150,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:30,action:"blaster",value:"front"},{actionTime:40,action:"blaster",value:"front"},{actionTime:50,action:"blaster",value:"front"},{actionTime:80,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:100,action:"blaster",value:"front"},{actionTime:110,action:"blaster",value:"front"},{actionTime:130,action:"setRotation",value:[0,0,0]},{actionTime:140,action:"setPatternTime",value:0}],droneSortieFromR:[{actionTime:10,action:"move",value:[50,-10,50]}],droneSortieFromRAfter:[{actionTime:10,action:"moveTo",value:[0,-5,150]},{actionTime:20,action:"setPatternTime",value:0}],droneSortieFromL:[{actionTime:10,action:"move",value:[-50,-10,50]}],droneSortieFromLAfter:[{actionTime:10,action:"moveTo",value:[0,-5,150]},{actionTime:20,action:"setPatternTime",value:0}],bomberDefaultMoveZ:[{actionTime:0,action:"setDefaultSpeed",value:[0,0,.5]}],bomberBlastLoop:[{actionTime:10,action:"blaster",value:"pc"},{actionTime:60,action:"setPatternTime",value:0}],fighterBlastLoop:[{actionTime:30,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],fighterRandomMove:[{actionTime:0,action:"randomMoveTo",value:[-30,30,-15,15,130,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:70,action:"setRotation",value:"pc"},{actionTime:90,action:"blaster",value:"front"},{actionTime:120,action:"setRotation",value:"pc"},{actionTime:150,action:"blaster",value:"front"},{actionTime:180,action:"setPatternTime",value:0}],fighterRandomMove1H:[{actionTime:0,action:"randomMoveTo",value:[10,30,-10,10,130,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],fighterRandomMove2H:[{actionTime:0,action:"randomMoveTo",value:[-30,-10,-10,10,130,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],fighterRandomMove1Q:[{actionTime:0,action:"randomMoveTo",value:[10,30,5,15,130,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],fighterRandomMove2Q:[{actionTime:0,action:"randomMoveTo",value:[-30,-10,5,15,130,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],fighterRandomMove3Q:[{actionTime:0,action:"randomMoveTo",value:[10,30,-15,-5,130,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],fighterRandomMove4Q:[{actionTime:0,action:"randomMoveTo",value:[-30,-25,-5,130,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],fighterRandomMove1HR:[{actionTime:0,action:"randomMoveTo",value:[10,30,-10,10,150,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],fighterRandomMove2HR:[{actionTime:0,action:"randomMoveTo",value:[-30,-10,-10,10,150,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],fighterRandomMove1QR:[{actionTime:0,action:"randomMoveTo",value:[10,30,5,15,150,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],fighterRandomMove2QR:[{actionTime:0,action:"randomMoveTo",value:[-30,-10,5,15,150,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],fighterRandomMove3QR:[{actionTime:0,action:"randomMoveTo",value:[10,30,-15,-5,150,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],fighterRandomMove4QR:[{actionTime:0,action:"randomMoveTo",value:[-30,-25,-5,150,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],fighterRandomMove1HF:[{actionTime:0,action:"randomMoveTo",value:[10,30,-10,10,130,140]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],fighterRandomMove2HF:[{actionTime:0,action:"randomMoveTo",value:[-30,-10,-10,10,130,140]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],fighterRandomMove1QF:[{actionTime:0,action:"randomMoveTo",value:[10,30,5,15,130,140]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],fighterRandomMove2QF:[{actionTime:0,action:"randomMoveTo",value:[-30,-10,5,15,130,140]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],fighterRandomMove3QF:[{actionTime:0,action:"randomMoveTo",value:[10,30,-15,-5,130,140]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],fighterRandomMove4QF:[{actionTime:0,action:"randomMoveTo",value:[-30,-25,-5,130,140]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],fighterRandomMove1HR:[{actionTime:0,action:"randomMoveTo",value:[10,30,-10,10,150,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],fighterRandomMove2HR:[{actionTime:0,action:"randomMoveTo",value:[-30,-10,-10,10,150,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],fighterRandomMove1QR:[{actionTime:0,action:"randomMoveTo",value:[10,30,5,15,150,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],fighterRandomMove2QR:[{actionTime:0,action:"randomMoveTo",value:[-30,-10,5,15,150,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],fighterRandomMove3QR:[{actionTime:0,action:"randomMoveTo",value:[10,30,-15,-5,150,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],fighterRandomMove4QR:[{actionTime:0,action:"randomMoveTo",value:[-30,-25,-5,150,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],destroyerBlastLoop:[{actionTime:0,action:"blaster",value:"front"},{actionTime:10,action:"blaster",value:"front"},{actionTime:20,action:"blaster",value:"front"},{actionTime:30,action:"blaster",value:"front"},{actionTime:60,action:"setPatternTime",value:0}],destroyerRandomMove:[{actionTime:0,action:"randomMoveTo",value:[-15,15,-5,5,130,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],destroyerRandomMove1H:[{actionTime:0,action:"randomMoveTo",value:[5,35,-10,10,130,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],destroyerRandomMove2H:[{actionTime:0,action:"randomMoveTo",value:[-35,-5,-10,10,130,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],destroyerRandomMove1Q:[{actionTime:0,action:"randomMoveTo",value:[5,35,5,15,130,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],destroyerRandomMove2Q:[{actionTime:0,action:"randomMoveTo",value:[-35,-5,5,15,130,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],destroyerRandomMove3Q:[{actionTime:0,action:"randomMoveTo",value:[5,35,-15,-5,130,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],destroyerRandomMove4Q:[{actionTime:0,action:"randomMoveTo",value:[-35,-20,-5,130,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],destroyerRandomMove1HF:[{actionTime:0,action:"randomMoveTo",value:[5,35,-10,10,130,140]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],destroyerRandomMove2HF:[{actionTime:0,action:"randomMoveTo",value:[-35,-5,-10,10,130,140]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],destroyerRandomMove1QF:[{actionTime:0,action:"randomMoveTo",value:[5,35,5,15,130,140]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],destroyerRandomMove2QF:[{actionTime:0,action:"randomMoveTo",value:[-35,-5,5,15,130,140]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],destroyerRandomMove3QF:[{actionTime:0,action:"randomMoveTo",value:[5,35,-15,-5,130,140]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],destroyerRandomMove4QF:[{actionTime:0,action:"randomMoveTo",value:[-35,-20,-5,130,140]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],destroyerRandomMove1HR:[{actionTime:0,action:"randomMoveTo",value:[5,35,-15,15,150,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],destroyerRandomMove2HR:[{actionTime:0,action:"randomMoveTo",value:[-35,-5,-15,15,150,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],destroyerRandomMove1QR:[{actionTime:0,action:"randomMoveTo",value:[5,35,5,15,150,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],destroyerRandomMove2QR:[{actionTime:0,action:"randomMoveTo",value:[-35,-5,5,15,150,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],destroyerRandomMove3QR:[{actionTime:0,action:"randomMoveTo",value:[5,35,-15,-5,150,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],destroyerRandomMove4QR:[{actionTime:0,action:"randomMoveTo",value:[-35,-20,-5,150,160]},{actionTime:20,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"front"},{actionTime:60,action:"blaster",value:"front"},{actionTime:80,action:"blaster",value:"front"},{actionTime:90,action:"setPatternTime",value:0}],cruiserDefaultMoveZ:[{actionTime:0,action:"setDefaultSpeed",value:[0,0,.5]}],cruiserBlastLoop:[{actionTime:80,action:"blaster",value:"pc"},{actionTime:160,action:"blaster",value:"pc"},{actionTime:160,action:"setPatternTime",value:0}],bossFirstAttack:[{actionTime:10,action:"blaster",value:"pc"},{actionTime:30,action:"blaster",value:"pc"},{actionTime:50,action:"blaster",value:"pc"},{actionTime:70,action:"blaster",value:"pc"},{actionTime:190,action:"setPatternTime",value:0}],bossLoop:[{actionTime:0,action:"setRotation",value:"pc"},{actionTime:10,action:"blaster",value:"pc"},{actionTime:20,action:"blaster",value:"pc"},{actionTime:30,action:"blaster",value:"pc"},{actionTime:35,action:"setRotation",value:"pc"},{actionTime:40,action:"blaster",value:"pc"},{actionTime:50,action:"blaster",value:"pc"},{actionTime:60,action:"blaster",value:"pc"},{actionTime:60,action:"setRotation",value:[0,0,0]},{actionTime:65,action:"randomMoveTo",value:[-5,5,-5,5,190,200]},{actionTime:125,action:"randomMoveTo",value:[-5,5,-5,5,190,200]},{actionTime:130,action:"setPatternTime",value:0}],bossFinalLoop:[{actionTime:10,action:"setRotation",value:[0,0,0]},{actionTime:30,action:"moveTo",value:[0,0,75]},{actionTime:40,action:"blaster",value:"pc"},{actionTime:50,action:"blaster",value:"pc"},{actionTime:60,action:"blaster",value:"pc"},{actionTime:70,action:"blaster",value:"pc"},{actionTime:80,action:"blaster",value:"pc"},{actionTime:90,action:"blaster",value:"pc"},{actionTime:100,action:"blaster",value:"pc"},{actionTime:110,action:"blaster",value:"pc"},{actionTime:120,action:"blaster",value:"pc"},{actionTime:130,action:"blaster",value:"pc"},{actionTime:140,action:"blaster",value:"pc"},{actionTime:150,action:"blaster",value:"pc"},{actionTime:160,action:"randomMoveTo",value:[-15,15,-5,5,80,100]},{actionTime:280,action:"setPatternTime",value:0}]};function _n(i){const e=i.npcAI.timeTriggered,t=i.npcAI.hpTriggered;e.length>0&&i.elapsedTime>=e[0].triggerTime&&(i.aiPattern=lt[e[0].aiPattern],i.aiPatternTime=0,i.aiPatternCurrentStep=-1,e.shift()),t.length>0&&i.hp<=t[0].triggerHP&&(i.aiPattern=lt[t[0].aiPattern],i.aiPatternTime=0,i.aiPatternCurrentStep=-1,t.shift())}function Dt(i,e){if(_n(i),!(!i.aiPattern||!i.aiPattern[i.aiPatternCurrentStep+1])&&i.aiPattern[i.aiPatternCurrentStep+1].actionTime<=i.aiPatternTime){i.aiPatternCurrentStep++;const t=i.aiPattern[i.aiPatternCurrentStep].action,a=i.aiPattern[i.aiPatternCurrentStep].value;t=="move"&&Hn(i,a),t=="moveTo"&&Nt(i,a),t=="randomMoveTo"&&On(i,a),t=="blaster"&&Nn(i,a),t=="setPatternTime"&&Dn(i,a),t=="setDefaultSpeed"&&Un(i,a),t=="setRotation"&&zn(i,a,e)}}function Dn(i,e){i.aiPatternTime=e;for(let t=0;t<i.aiPattern.length;t++)if(i.aiPattern[t].actionTime>=e){i.aiPatternCurrentStep=t-1;return}}function Nn(i,e){i.fireBlaster=e}function Hn(i,e){i.targetPosition[0]=i.position.x+e[0],i.targetPosition[1]=i.position.y+e[1],i.targetPosition[2]=i.position.z+e[2]}function Nt(i,e){i.targetPosition[0]=e[0],i.targetPosition[1]=e[1],i.targetPosition[2]=e[2]}function On(i,e){const t=Math.random()*Math.abs(e[1]-e[0])+e[0],a=Math.random()*Math.abs(e[3]-e[2])+e[2],n=Math.random()*Math.abs(e[5]-e[4])+e[4];Nt(i,[t,a,n])}function zn(i,e,t){if(e=="pc"){const a=t.x-i.position.x,n=t.y-i.position.y,r=t.z-i.position.z,o=Math.sqrt(Math.pow(t.z-i.position.z,2)+Math.pow(t.x-i.position.x,2)),s=Math.atan2(a,r),c=Math.atan2(n,o);i.targetRotation[0]=c,i.targetRotation[1]=s+Math.PI,i.targetRotation[2]=0}else i.targetRotation[0]=e[0],i.targetRotation[1]=e[1],i.targetRotation[2]=e[2]}function Un(i,e){i.defaultSpeed[0]=e[0],i.defaultSpeed[1]=e[1],i.defaultSpeed[2]=e[2]}const Gn=.3;function Kn(i,e,{npcAIname:t,npcBasic:a,startingPosition:n}){const r=Qn[a],o=new wt;let s=new $;if(o.load(r.npcGlb,c=>s.add(c.scene)),s=Te(s,r),s.npcAI=Te(s.npcAI,Cn[t]),s.elapsedTime=0,s.aiPatternTime=0,s.aiPatternCurrentStep=0,s.fireBlaster="none",s.hitMark=0,s.type=="asteroid"){s.scale.set(Math.random()*1.2+.4,Math.random()*1.2+.4,Math.random()*1.2+.4);let c=Math.max(s.scale.x,s.scale.y,s.scale.z);s.collisionSize=c*s.collisionSize,s.hp=Math.ceil(c*2)*s.hp,s.rotatingSpeed=[Math.random()/10-.05,Math.random()/10-.05,Math.random()/10-.05]}n=="random"&&(n=[Math.random()*75-37.5,Math.random()*35-12.5,700]),s.unpassable&&(i.boostalbe=!1),s.position.set(n[0],n[1],n[2]),e.npcs.push(s),Dt(s),i.add(s)}function Vn(i,e,t,a){if(t.fireBlaster=="none")return;y(t.blasterSoundSrc,Gn);let n=16720418,r;t.blasterShape=="sphere"?r=new Bt(t.blasterRadius,8,8):t.blasterShape=="capsule"&&(r=new xt(t.blasterRadius,t.blasterLength,2,8),r.rotateX(Math.PI/2)),t.blasterColor=="violet"&&(n=12255487),t.blasterColor=="blue"&&(n=65535),t.blasterColor=="green"&&(n=65280),t.lasterColor=="orange"&&(n=16750848);const o=new K({color:n,transparent:!0,opacity:.8,blending:Ke}),s=new oe(r,o);s.position.copy(t.position),s.rotation.copy(t.rotation),s.rotation.y+=Math.PI,s.speed=t.blasterSpeed,s.power=t.blasterPower,s.collisionSize=t.blasterLength,s.translateZ(t.collisionSize),s.translateY(-t.collisionSize/5),t.fireBlaster=="pc"&&s.lookAt(e.x,e.y,e.z),t.fireBlaster="none",a.push(s),i.add(s)}function Te(i={},e={}){if(typeof e!="object"||e==null)return i;for(const[t,a]of Object.entries(e))Array.isArray(a)?i[t]=a.map(n=>typeof n=="object"&&n!=null?Te({},n):n):typeof a=="object"&&a!=null?Te(i[t]||{},a):i[t]=a;return i}function Xn(i,e){if(i.timeStamp++,i.levelArr.length<1)return e;for(;i.levelArr.length>0&&i.levelArr[0].eventTime<=i.timeStamp;){const t=i.levelArr[0];Kn(i,e,t),i.levelArr.shift(),i.timeStamp=0}}function Wn(i,e,t,a){const r=e.blasterCoolTime,o=e.blasterDelay;let s=[];if(r>0&&(e.blasterCoolTime-=1),a.blaster&&r==0&&!a.boost){const c=gn(e);i.add(c),t.push(c),e.blasterCoolTime=o}t.length>0&&(s=t.filter(c=>c.position.z<700?(c.position.x+=c.speed[0],c.position.y+=c.speed[1],c.position.z+=c.speed[2]-i.boostSpeed,c.position.needsUpdate=!0,c):(E(i,c),!1))),t.length=0,t.push(...s)}const qn=function(i,e,{pcShip:t,pcBlasters:a},n){let[s,c,l]=t.maxSpeed,[m,d,u]=t.speedAccel,[g,p,v]=t.speedDecel,[T,f,I]=t.speed,R=t.position,h=t.rotation,b=!1;function F(){T!=0&&(T=T*g),Math.abs(T)<.001&&(T=0)}function w(){f!=0&&(f=f*p),Math.abs(f)<.001&&(f=0)}t.rolling||(n.boost&&t.energy>0&&i.boostalbe?(t.energy-=t.boostCost,i.timeStamp+=2,n.boost&&i.boostSpeed<l&&(i.boostSpeed+=u/2,i.boostSpeed>l&&(i.boostSpeed=l))):i.boostSpeed>0&&(i.boostSpeed=i.boostSpeed*v,i.boostSpeed<.01&&(i.boostSpeed=0)),n.right&&n.left?F():((n.up&&!n.down||!n.up&&n.down)&&(s=s*.86,c=c*.86,m=m*.86,d=d*.86,g=1-(1-g)*.86,p=1-(1-p)*.86,b=!0),n.right&&R.x>-35?b?(T>0&&(T=T*g),T<-s?(T=T*g,T>-s&&(T=-s)):(T-=m,T<-s&&(T=-s))):(T>0&&(T=T*g),T-=m,T<-s&&(T=-s)):F(),n.left&&R.x<35?b?(T<0&&(T=T*g),T>s?(T=T*g,T<s&&(T=s)):(T+=m,T>s&&(T=s))):(T<0&&(T=T*g),T+=m,T>s&&(T=s)):F()),n.up&&n.down?w():((n.right&&!n.left||!n.right&&n.left)&&(s=s/2,c=c/2,m=m/2,d=d/2,g=1-(1-g)/2,p=1-(1-p)/2,b=!0),n.up&&R.y>-15?b?(f>0&&(f=f*p),f<-c?(f=f*p,f>-c&&(f=-c)):(f-=d,f<-c&&(f=-c))):(f>0&&(f=f*p),f-=d,f<-c&&(f=-c)):w(),n.down&&R.y<15?b?(f<0&&(f=f*p),f>c?(f=f*p,f<c&&(f=c)):(f+=d,f>c&&(f=c))):(f<0&&(f=f*p),f+=d,f>c&&(f=c)):w())),!t.rolling&&n.rightRoll&&!i.boostSpeed&&t.rollCoolTime==0?(t.rolling="rightRoll",t.rollCoolTime=t.rollDelay,t.energy-=t.rollCost,h.z+=(Math.PI*2-h.z)*.25,T=0,f=0):t.rolling=="rightRoll"&&(h.z+=(Math.PI*2-h.z)*.25,R.x>-35?T=-s:T=T*g,h.z>=Math.PI*1.9&&(h.z-=Math.PI*2,t.rolling=!1,F())),!t.rolling&&n.leftRoll&&!i.boostSpeed&&t.rollCoolTime==0?(t.rolling="leftRoll",t.rollCoolTime=t.rollDelay,t.energy-=t.rollCost,h.z+=(-Math.PI*2-h.z)*.25,T=0,f=0):t.rolling=="leftRoll"&&(h.z+=(-Math.PI*2-h.z)*.25,R.x<35?T=s:T=T*g,h.z<=-Math.PI*1.9&&(h.z+=Math.PI*2,t.rolling=!1,F())),t.rollCoolTime>0&&t.rollCoolTime--,t.energyCoolTime--,t.energy<=t.energyMax&&t.energyCoolTime<=0&&(t.energy+=t.energyRecharge,t.energyCoolTime=t.energyDelay,t.energy>t.energyMax&&(t.energy=t.energyMax)),t.position.x+=T,t.position.y+=f,t.position.z=i.boostSpeed*15,t.speed=[T,f,I],t.rolling||(t.rotation.z=-T/s/12*Math.PI,t.rotation.y=T/s/30*Math.PI,t.rotation.x=-f/c/30*Math.PI),e.rotation.z=Math.PI+T/s/150*Math.PI,e.rotation.y=-t.position.x/1e3,e.rotation.x=Math.PI-(t.position.y-50)/1e3,Wn(i,t,a,n)};function kn(i,e){if(e.type=="asteroid"&&(e.position.x+=e.defaultSpeed[0],e.position.y+=e.defaultSpeed[1],e.position.z+=e.defaultSpeed[2]),!e.targetPosition||e.targetPosition.length<3)return;let t=[e.position.x,e.position.y,e.position.z];if(t==e.targetPosition&&e.speed==[0,0,0])return;let a=e.speed,n=!1,r=Yn(t,e.targetPosition,e.maxSpeed);if(r>e.maxSpeed/2){let s=e.targetPosition.map((c,l)=>(c-t[l])/r);s.forEach((c,l)=>{c*a[l]<0&&(n=!0)}),n?o():s.forEach((c,l)=>{c>=0?c>a[l]&&(a[l]+=e.speedAccel[l],a[l]>c&&(a[l]=c)):c<a[l]&&(a[l]-=e.speedAccel[l],a[l]<c&&(a[l]=c))})}else o();function o(){a.forEach((s,c)=>{a[c]=s*e.speedDecel[c]}),a.filter(s=>Math.abs(s)>.01).length==0&&(a=[0,0,0],e.targetPosition=t)}e.position.x=t[0]+a[0],e.position.y=t[1]+a[1],e.position.z=t[2]+a[2]-i.boostSpeed*1.5,e.speed=[a[0],a[1],a[2]],e.translateX(e.defaultSpeed[0]),e.translateY(e.defaultSpeed[1]),e.translateZ(-e.defaultSpeed[2])}function Yn(i,e,t){let a=Math.pow(i[0]-e[0],2),n=Math.pow(i[1]-e[1],2),r=Math.pow(i[2]-e[2],2);return Math.sqrt(a+n+r)/t}function Zn(i){const e=i.targetRotation;let t=[i.rotation.x,i.rotation.y,i.rotation.z];if(i.type=="asteroid"){i.rotateX(i.rotatingSpeed[0]),i.rotateY(i.rotatingSpeed[1]),i.rotateZ(i.rotatingSpeed[2]);return}if(i==e)return;const a=t.map((n,r)=>Math.abs(n-e[r])<Math.PI?e[r]-n:mt(n)+mt(e[r]));i.rotation.x+=a[0]*(1-i.speedDecel[0]),i.rotation.y+=a[1]*(1-i.speedDecel[1]),i.rotation.z+=a[2]*(1-i.speedDecel[2])}function mt(i){return i>Math.PI?i-2*Math.PI:-i}function Jn(i,e){if(!e)return;let t=[];e.length>0&&(t=e.filter(a=>a.position.z<-200||Math.abs(a.position.y)>70||Math.abs(a.position.x)>200?(E(i,a),!1):(a.position.z-=i.boostSpeed,a.translateZ(a.speed)))),e.length=0,e.push(...t)}const $n=function(i,e,{npcs:t,npcBlasters:a}){if(t.length<1&&a.length<1){i.timeStamp+=2;return}let n=t.filter(r=>(r.elapsedTime++,r.aiPatternTime++,Dt(r,e),kn(i,r),Zn(r),Vn(i,e,r,a),r.position.z<0&&r.type!="asteroid"&&(r.aiPattern=[],r.targetRotation=[0,0,0],r.targetPosition[2]=-300),r.position.z<-200||Math.abs(r.position.x)>300||Math.abs(r.position.y)>150?(r.unpassable&&(i.boostalbe=!0),E(i,r),!1):!0));t.length=0,t.push(...n),Jn(i,a)};function jn(i,{sprites:e,materials:t,velocities:a,lifetimes:n,rotations:r}){if(!e||e.length<1)return;const o=[],s=[],c=[],l=[],m=[];e.forEach((d,u)=>{if(n[u]<=0){ze(i,d.uuid);return}d.position.x+=a[u].x,d.position.y+=a[u].y,d.position.z+=a[u].z;let g=d.material.color.r*n[u]/2,p=d.material.color.g*n[u]/2,v=d.material.color.b*n[u]/2;g>1&&(g=1),p>1&&(p=1),v>1&&(v=1);let T=50*Math.sin(n[u]*9);T>0?(T=0,n[u]=0):n[u]-=.015,e[u].material.color.set(g,p,v),e[u].scale.set(T,T,T),t[u].rotation=n[u]*r[u]/3,o.push(d),s.push(t[u]),c.push({x:a[u].x,y:a[u].y,z:a[u].z}),l.push(n[u]),m.push(r[u])}),e.length=0,t.length=0,a.length=0,n.length=0,r.length=0,e.push(...o),t.push(...s),a.push(...c),n.push(...l),r.push(...m)}function ea(i,e){ta(i,e),ia(i,e)}function ta(i,e){let t=e.pcShip.hp,a=e.pcShip.hpDisplayed;a-=(a-t)*.2,Math.abs(t-a)<.01&&(a=t),i.getElementById("hp").style.width=a*4+"px",e.pcShip.hpDisplayed=a}function ia(i,e){let t=e.pcShip.energy,a=e.pcShip.energyDisplayed;a-=(a-t)*.2,Math.abs(t-a)<.01&&(a=t),i.getElementById("energy").style.width=a*4+"px",e.pcShip.energyDisplayed=a}function na(i,e,t,a,n,r,o){En(i,i.backgroundObjs),Xn(i,e),$n(i,t.pcShip.position,e),qn(i,r,t,o),Ln(i,t,e,a),jn(i,a),ea(n,t),o.esc&&(i.gameState="pause"),t.pcShip.hp<=0&&(t.pcShip.visible=!1),t.pcShip.hpDisplayed<=0&&(i.gameState="gameOver"),i.levelArr.length<=0&&e.npcs.length<=0&&(i.gameState="missionComplete")}function aa(i,e){i.timeStamp++,e.position.y=Math.sin(i.timeStamp/25)}const Y=(i,e)=>{let t=i.findIndex(r=>r.classList.contains("selected")),a=e.up,n=e.down;if(e.upDownKey=="unInverted"&&(a=e.down,n=e.up),n)i[t].classList.remove("selected"),t=(t+1)%i.length,i[t].classList.add("selected"),y("select");else if(a)i[t].classList.remove("selected"),t=(t-1+i.length)%i.length,i[t].classList.add("selected"),y("select");else if(e.enter)return i[t].id;return e.pressed=!1,!1};function ra(i,e,t){if(!t.pressed)return;e.getElementById("canvas").style.opacity=1,e.getElementById("inGame").style.opacity=0,e.getElementById("titleScreen").style.opacity=1,e.getElementById("changeShip").style.opacity=0,e.getElementById("settings").style.opacity=0,e.getElementById("instructions").style.opacity=0;const a=[...e.querySelectorAll(".titleScreenOption")];let n=Y(a,t);n=="startGame"&&(i.gameState="intro",y("confirm")),n=="toChangeShip"&&(i.gameState="changeShip",y("confirm")),n=="toSettings"&&(i.gameState="settings",y("confirm")),n=="toInstructions"&&(i.gameState="instructions",y("confirm")),t.pressed=!1}function oa(){const i=new Audio("soundSrc/bgMusic.mp3");i.volume=.5,i.loop=!0,i.play();function e(){i.pause(),i.currentTime=0}return e}function sa(i,e,t,a){return t.getElementById("titleScreen").style.opacity=0,t.getElementById("inGame").style.opacity=1,i.timeStamp=0,i.gameState="startingGame",oa()}function ca(i,e,t,a){if(!t.pressed)return;e.getElementById("titleScreen").style.opacity=0,e.getElementById("changeShip").style.opacity=1;const n=[...e.querySelectorAll(".changeShipOption")];let r=Y(n,t);t.right&&(i.shipNumber++,i.shipNumber>=N.length&&(i.shipNumber=0),e.getElementById("shipName").textContent=N[i.shipNumber].name,e.getElementById("shipDesc").textContent=N[i.shipNumber].desc,Ue(i,a),y("adjust")),t.left&&(i.shipNumber--,i.shipNumber<0&&(i.shipNumber=N.length-1),e.getElementById("shipName").textContent=N[i.shipNumber].name,e.getElementById("shipDesc").textContent=N[i.shipNumber].desc,Ue(i,a),y("adjust")),r=="returnToTitle"&&(i.gameState="titleScreen",y("confirm")),t.pressed=!1}function la(i,e,t){if(!t.pressed)return;e.getElementById("canvas").style.opacity=.5,e.getElementById("titleScreen").style.opacity=0,e.getElementById("settings").style.opacity=1;const a=[...e.querySelectorAll(".settingsOption")];let n=Y(a,t);if(n=="returnToTitle"&&(i.gameState="titleScreen",y("confirm")),n=="invertUpDown"){let r="inverted(default)",o="s or ",s="w or ";t.upDownKey=="inverted"?(t.upDownKey="unInverted",r="not inverted",o="w or ",s="s or "):(t.upDownKey="inverted",r=" inverted(default)",o="s or ",s="w or "),e.getElementById("upDownSettings").textContent=r,e.getElementById("upKey").textContent=o,e.getElementById("downKey").textContent=s,y("adjust")}t.pressed=!1}function Le(i,e,t){if(!t.pressed)return;e.getElementById("canvas").style.opacity=.5,e.getElementById("titleScreen").style.opacity=0,e.getElementById("instructions").style.opacity=1;const a=[...e.querySelectorAll(".settingsOption")];Y(a,t)=="returnToTitle"&&(i.gameState="titleScreen",y("confirm")),t.pressed=!1}function ma(i,e,t){if(!t.pressed)return;e.getElementById("canvas").style.opacity=.5,e.getElementById("inGame").style.opacity=0,e.getElementById("gameOver").style.opacity=1;const a=[...e.querySelectorAll(".gameOverOption")];Y(a,t)=="returnToTitle"&&(e.getElementById("canvas").style.opacity=1,e.getElementById("inGame").style.opacity=0,e.getElementById("gameOver").style.opacity=0,e.getElementById("titleScreen").style.opacity=1,i.gameState="initiateGame",y("confirm")),t.pressed=!1}function da(i,e,t){if(!t.pressed)return;e.getElementById("canvas").style.opacity=.5,e.getElementById("inGame").style.opacity=0,e.getElementById("missionComplete").style.opacity=1;const a=[...e.querySelectorAll(".missionCompleteOption")];Y(a,t)=="returnToTitle"&&(e.getElementById("canvas").style.opacity=1,e.getElementById("inGame").style.opacity=0,e.getElementById("missionComplete").style.opacity=0,e.getElementById("titleScreen").style.opacity=1,i.gameState="initiateGame",y("confirm")),t.pressed=!1}function ua(i,e,t){if(!t.pressed)return;e.getElementById("canvas").style.opacity=.5,e.getElementById("inGame").style.opacity=.2,e.getElementById("pause").style.opacity=1;const a=[...e.querySelectorAll(".pauseOption")];let n=Y(a,t);n=="returnToTitle"&&(e.getElementById("canvas").style.opacity=1,e.getElementById("inGame").style.opacity=0,e.getElementById("pause").style.opacity=0,e.getElementById("titleScreen").style.opacity=1,i.gameState="initiateGame"),n=="resume"&&(e.getElementById("canvas").style.opacity=1,e.getElementById("inGame").style.opacity=1,e.getElementById("pause").style.opacity=0,i.gameState="playing",y("confirm")),t.pressed=!1}const re=new Ri({antialias:!0}),G=new bt(15,window.innerWidth/window.innerHeight,1,3e3),Ht=Ii();let X={pcShip:Qt(),pcBlasters:[]},fe={npcs:[],npcBlasters:[]},pe={sprites:[],materials:[],velocities:[],lifetimes:[],rotations:[]},Q=Tn(),dt,A=new Ai;A.shipNumber=0;A.add(new It(Ht,bi()));A.backgroundObjs=[];In(A);_t(A,X,fe,pe,G);re.setPixelRatio(window.devicePixelRatio);yn(window,document,Q,G,re);document.getElementById("canvas").appendChild(re.domElement);setInterval(ga,1e3/30);function ga(){if(bn(A,Ht),A.gameState=="missionComplete"&&da(A,document,Q),A.gameState=="playing"||A.gameState=="missionComplete"){na(A,fe,X,pe,document,G,Q),re.render(A,G);return}if(A.gameState=="intro"&&(dt=sa(A,G,document)),A.gameState=="titleScreen"&&ra(A,document,Q),A.gameState=="changeShip"&&ca(A,document,Q,X),A.gameState=="settings"&&la(A,document,Q),A.gameState=="instructions"&&Le(A,document,Q),A.gameState=="instructions"&&Le(A,document,Q),A.gameState=="instructions"&&Le(A,document,Q),A.gameState=="gameOver"&&ma(A,document,Q),A.gameState=="pause"){ua(A,document,Q);return}A.gameState=="initiateGame"&&(_t(A,X,fe,pe,G),Ta(),dt()),A.gameState!=="startingGame"?aa(A,X.pcShip):startingGame(A,G,X.pcShip),re.render(A,G)}function Ta(){X.pcBlasters=[],fe={npcs:[],npcBlasters:[]},pe={sprites:[],materials:[],velocities:[],lifetimes:[],rotations:[]}}
